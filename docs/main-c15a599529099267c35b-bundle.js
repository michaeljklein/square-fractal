(()=>{"use strict";var t,e={417:(t,e,i)=>{var n,r=i(500),o=(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(){function t(){}return t.prototype.midpoint=function(t,e){return null!=this.midpoint_weight?(console.log(this.midpoint_weight),new r.E9({x:this.midpoint_weight*t.x+(1-this.midpoint_weight)*e.x,y:this.midpoint_weight*t.y+(1-this.midpoint_weight)*e.y})):new r.E9({x:(t.x+e.x)/2,y:(t.y+e.y)/2})},t.prototype.render_pointarray=function(){return new r.VC(this.render().flatMap((function(t){return[t.x,t.y]})))},t.prototype.fractalize=function(t,e,i,n,o){var s=(0,r.Wj)().addTo("body").size(e,e);s.polyline(this.render_pointarray()).fill("none").stroke({color:"#000",width:i});for(var p=0,h=[[this,0]],a=function(){var e=h.pop(),r=e[0],o=e[1];if(p++,s.polyline(r.render_pointarray()).fill("none").stroke({color:"#000",width:i}),o<=t){var a=crypto.getRandomValues(new Uint32Array(1))[0]/Math.pow(2,32),u=r.step_options(n),c=Math.floor(a*u);h.push.apply(h,r.next_step(c,n).map((function(t){return[t,o+1]})))}};h.length;)a();return p},t}(),p=function(t){function e(e,i,n,r){var o=t.call(this)||this;return o.pt0=e,o.pt1=i,o.pt2=n,o.midpoint_weight=r,o}return o(e,t),e.prototype.render=function(){return[this.pt0,this.pt1,this.pt2]},e.prototype.rotate=function(){var t=[this.pt0,this.pt1,this.pt2];this.pt1=t[0],this.pt2=t[1],this.pt0=t[2]},e.prototype.trisect=function(){var t=this.pt0,i=this.pt1,n=this.pt2,r=this.midpoint(t,i),o=this.midpoint(i,n),s=this.midpoint(n,t);return[new e(t,r,s,this.midpoint_weight),new e(r,i,o,this.midpoint_weight),new e(s,o,n,this.midpoint_weight),new e(r,o,s,this.midpoint_weight)]},e.prototype.t_split=function(){var t=this.pt0,i=this.pt1,n=this.pt2,r=this.midpoint(t,i),o=this.midpoint(i,n),s=this.midpoint(n,t),p=this.midpoint(r,s);return[new e(t,r,s,this.midpoint_weight),new h(p,r,i,o,this.midpoint_weight),new h(s,p,o,n,this.midpoint_weight)]},e.prototype.step_options=function(t){return t?5:9},e.prototype.next_step=function(t,e){if(e)switch(t){case 0:return this.trisect();case 1:return this.t_split();case 2:return this.rotate(),this.t_split();case 3:return this.rotate(),this.rotate(),this.t_split();case 4:return[];default:throw new Error("next_step: index out of range")}else switch(t){case 0:case 1:case 2:return this.trisect();case 3:return this.t_split();case 4:return this.rotate(),this.t_split();case 5:return this.rotate(),this.rotate(),this.t_split();case 6:case 7:case 8:return[];default:throw new Error("next_step: index out of range")}},e}(s),h=function(t){function e(e,i,n,r,o){var s=t.call(this)||this;return s.pt0=e,s.pt1=i,s.pt2=n,s.pt3=r,s.midpoint_weight=o,s}return o(e,t),e.prototype.render=function(){return[this.pt0,this.pt1,this.pt2,this.pt3]},e.prototype.rotate=function(){var t=[this.pt0,this.pt1,this.pt2,this.pt3];this.pt1=t[0],this.pt2=t[1],this.pt3=t[2],this.pt0=t[3]},e.prototype.step_options=function(t){return 1},e.prototype.next_step=function(t,e){if(0===t)return[];throw new Error("next_step: index out of range")},e}(s),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.quadsect=function(){var t=this.pt0,i=this.pt1,n=this.pt2,r=this.pt3,o=this.midpoint(this.pt0,this.pt1),s=this.midpoint(this.pt1,this.pt2),h=this.midpoint(this.pt2,this.pt3),a=this.midpoint(this.pt3,this.pt0);return[new p(t,o,a,this.midpoint_weight),new p(o,i,s,this.midpoint_weight),new p(s,n,h,this.midpoint_weight),new p(a,h,r,this.midpoint_weight),new e(o,s,h,a,this.midpoint_weight)]},e.prototype.bisect=function(){var t=this.pt0,e=this.pt1,i=this.pt2,n=this.pt3;return[new p(t,e,i,this.midpoint_weight),new p(t,i,n,this.midpoint_weight)]},e.prototype.step_options=function(t){return t?4:6},e.prototype.next_step=function(t,e){if(e)switch(t){case 0:return this.quadsect();case 1:return this.bisect();case 2:return this.rotate(),this.bisect();case 3:return[];default:throw new Error("next_step: index out of range")}else switch(t){case 0:case 1:return this.quadsect();case 2:return this.bisect();case 3:return this.rotate(),this.bisect();case 4:case 5:return[];default:throw new Error("next_step: index out of range")}},e}(h);window.onload=function(){return t=this,e=void 0,n=function(){var t,e,i,n,o,s,p,h,u,c,l,f,d;return function(t,e){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:p(0),throw:p(1),return:p(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function p(p){return function(h){return function(p){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,p[0]&&(s=0)),s;)try{if(i=1,n&&(r=2&p[0]?n.return:p[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,p[1])).done)return r;switch(n=0,r&&(p=[2&p[0],r.value]),p[0]){case 0:case 1:r=p;break;case 4:return s.label++,{value:p[1],done:!1};case 5:s.label++,n=p[1],p=[0];continue;case 7:p=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==p[0]&&2!==p[0])){s=0;continue}if(3===p[0]&&(!r||p[1]>r[0]&&p[1]<r[3])){s.label=p[1];break}if(6===p[0]&&s.label<r[1]){s.label=r[1],r=p;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(p);break}r[2]&&s.ops.pop(),s.trys.pop();continue}p=e.call(t,s)}catch(t){p=[6,t],n=0}finally{i=r=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([p,h])}}}(this,(function(w){for(t=Math.min(window.innerHeight,window.innerWidth),console.log("pixel size:",t),e=new r.E9({x:0,y:t}),i=new r.E9({x:t,y:t}),n=new r.E9({x:t,y:0}),o=new r.E9({x:0,y:0}),s=new a(e,i,n,o,this.midpoint_weight),p=new URLSearchParams(window.location.search),(h=Number(p.get("depth")))||(h=3),(u=Number(p.get("stroke")))||(u=3),c=Number(p.get("midpoint")),l=p.get("uniform"),f=!l||"t"==l,console.log("max_depth:",h),console.log("stroke_width:",u),console.log("midpoint_weight:",c),console.log("uniform_weights:",f),d=s.fractalize(h,t,u,f,c),console.log("num_shapes",d);d<2;)document.body.removeChild(document.body.children[0]),d=s.fractalize(h,t,u,f,c),console.log("num_shapes",d);return[2]}))},new((i=void 0)||(i=Promise))((function(r,o){function s(t){try{h(n.next(t))}catch(t){o(t)}}function p(t){try{h(n.throw(t))}catch(t){o(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,p)}h((n=n.apply(t,e||[])).next())}));var t,e,i,n}}},i={};function n(t){var r=i[t];if(void 0!==r)return r.exports;var o=i[t]={exports:{}};return e[t](o,o.exports,n),o.exports}n.m=e,t=[],n.O=(e,i,r,o)=>{if(!i){var s=1/0;for(u=0;u<t.length;u++){for(var[i,r,o]=t[u],p=!0,h=0;h<i.length;h++)(!1&o||s>=o)&&Object.keys(n.O).every((t=>n.O[t](i[h])))?i.splice(h--,1):(p=!1,o<s&&(s=o));if(p){t.splice(u--,1);var a=r();void 0!==a&&(e=a)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[i,r,o]},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={179:0};n.O.j=e=>0===t[e];var e=(e,i)=>{var r,o,[s,p,h]=i,a=0;if(s.some((e=>0!==t[e]))){for(r in p)n.o(p,r)&&(n.m[r]=p[r]);if(h)var u=h(n)}for(e&&e(i);a<s.length;a++)o=s[a],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(u)},i=self.webpackChunksquare_fractal=self.webpackChunksquare_fractal||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var r=n.O(void 0,[500],(()=>n(417)));r=n.O(r)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxJQUNyRUQsRUFBZ0JDLEdBQVMsS0FFMUJELEVBQWdCQyxHQUFXLEVBRTVCLE9BQU9uQyxFQUFvQlEsRUFBRUMsRUFBTyxFQUdqQ2tDLEVBQXFCQyxLQUFpQywyQkFBSUEsS0FBaUMsNEJBQUssR0FDcEdELEVBQW1CRSxRQUFRVCxFQUFxQlUsS0FBSyxLQUFNLElBQzNESCxFQUFtQnhGLEtBQU9pRixFQUFxQlUsS0FBSyxLQUFNSCxFQUFtQnhGLEtBQUsyRixLQUFLSCxHLEtDN0N2RixJQUFJSSxFQUFzQi9DLEVBQW9CUSxPQUFFTCxFQUFXLENBQUMsTUFBTSxJQUFPSCxFQUFvQixPQUM3RitDLEVBQXNCL0MsRUFBb0JRLEVBQUV1QyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3F1YXJlLWZyYWN0YWwvd2VicGFjay9ydW50aW1lL2NodW5rIGxvYWRlZCIsIndlYnBhY2s6Ly9zcXVhcmUtZnJhY3RhbC8uL2ZyYWN0YWwudHMiLCJ3ZWJwYWNrOi8vc3F1YXJlLWZyYWN0YWwvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vc3F1YXJlLWZyYWN0YWwvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3NxdWFyZS1mcmFjdGFsL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vc3F1YXJlLWZyYWN0YWwvd2VicGFjay9ydW50aW1lL2pzb25wIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8vc3F1YXJlLWZyYWN0YWwvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBkZWZlcnJlZCA9IFtdO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5PID0gKHJlc3VsdCwgY2h1bmtJZHMsIGZuLCBwcmlvcml0eSkgPT4ge1xuXHRpZihjaHVua0lkcykge1xuXHRcdHByaW9yaXR5ID0gcHJpb3JpdHkgfHwgMDtcblx0XHRmb3IodmFyIGkgPSBkZWZlcnJlZC5sZW5ndGg7IGkgPiAwICYmIGRlZmVycmVkW2kgLSAxXVsyXSA+IHByaW9yaXR5OyBpLS0pIGRlZmVycmVkW2ldID0gZGVmZXJyZWRbaSAtIDFdO1xuXHRcdGRlZmVycmVkW2ldID0gW2NodW5rSWRzLCBmbiwgcHJpb3JpdHldO1xuXHRcdHJldHVybjtcblx0fVxuXHR2YXIgbm90RnVsZmlsbGVkID0gSW5maW5pdHk7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgZGVmZXJyZWQubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgW2NodW5rSWRzLCBmbiwgcHJpb3JpdHldID0gZGVmZXJyZWRbaV07XG5cdFx0dmFyIGZ1bGZpbGxlZCA9IHRydWU7XG5cdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBjaHVua0lkcy5sZW5ndGg7IGorKykge1xuXHRcdFx0aWYgKChwcmlvcml0eSAmIDEgPT09IDAgfHwgbm90RnVsZmlsbGVkID49IHByaW9yaXR5KSAmJiBPYmplY3Qua2V5cyhfX3dlYnBhY2tfcmVxdWlyZV9fLk8pLmV2ZXJ5KChrZXkpID0+IChfX3dlYnBhY2tfcmVxdWlyZV9fLk9ba2V5XShjaHVua0lkc1tqXSkpKSkge1xuXHRcdFx0XHRjaHVua0lkcy5zcGxpY2Uoai0tLCAxKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZ1bGZpbGxlZCA9IGZhbHNlO1xuXHRcdFx0XHRpZihwcmlvcml0eSA8IG5vdEZ1bGZpbGxlZCkgbm90RnVsZmlsbGVkID0gcHJpb3JpdHk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKGZ1bGZpbGxlZCkge1xuXHRcdFx0ZGVmZXJyZWQuc3BsaWNlKGktLSwgMSlcblx0XHRcdHZhciByID0gZm4oKTtcblx0XHRcdGlmIChyICE9PSB1bmRlZmluZWQpIHJlc3VsdCA9IHI7XG5cdFx0fVxuXHR9XG5cdHJldHVybiByZXN1bHQ7XG59OyIsImltcG9ydCB7IFNWRywgUG9pbnQsIFBvaW50QXJyYXkgfSBmcm9tICdAc3ZnZG90anMvc3ZnLmpzJ1xuXG4vLyBUT0RPOlxuLy8gLSBjaGFuZ2Ugd2VpZ2h0c1xuLy8gLSBjaGFuZ2UgbWlkcG9pbnQgZnJhY3Rpb25cblxuLy8gc3F1YXJlIGZyYWN0YWw6XG4vLyAtIHN0YXJ0IHdpdGggYSBzcXVhcmVcbi8vIC0gZWFjaCBzaGFwZSBjYW4gYmU6XG4vLyAgICsgc3F1YXJlXG4vLyAgICAgKiBzcXVhcmUgaW5zaWRlXG4vLyAgICAgKiBzcGxpdCBpbnRvIHR3byB0cmlhbmdsZXMgdHdvIHdheXNcbi8vICAgICAqIGxlYXZlIGVtcHR5XG4vLyAgICsgdHJpYW5nbGVcbi8vICAgICAqIHRyaWFuZ2xlIGluc2lkZVxuLy8gICAgICogc3BsaXQgaW50byBcIlRcIjogdHJpYW5nbGUgYW5kIHR3byB+cmhvbWJ1cydcbi8vICAgKyByaG9tYnVzXG4vLyAgICAgKiBsZWF2ZSBlbXB0eVxuLy9cbi8vIHNvIHdlIGVpdGhlcjpcbi8vICAgMS4gdGFrZSB0aGUgaW5wdXQgKE4pIGFzIGEgbWl4ZWQtYmFzZSBzZWVkXG4vLyAgIDIuIHBpY2sgcmFuZG9tbHkgZWFjaCBzdGVwXG4vL1xuLy8gdHdvIGxpc3RzOlxuLy8gLSBub24tZG9uZSBxdWV1ZSAodHJpYW5nbGUgfCBzcXVhcmUpXG4vLyAtIGRvbmUgcXVldWUgKHRyaWFuZ2xlIHwgc3F1YXJlIHwgfnJob21idXMpXG4vL1xuLy8gZmluYWxseSwgcmVuZGVyIHRyaWFuZ2xlfHNxdWFyZXxyaG9tYnVzIC0+IFNWR1xuXG5hYnN0cmFjdCBjbGFzcyBTaGFwZSB7XG4gIGFic3RyYWN0IG1pZHBvaW50X3dlaWdodDogbnVtYmVyIHwgbnVsbDtcblxuICBtaWRwb2ludCh4czogUG9pbnQsIHlzOiBQb2ludCk6IFBvaW50IHtcbiAgICBpZiAodGhpcy5taWRwb2ludF93ZWlnaHQgIT0gbnVsbCkge1xuICAgICAgY29uc29sZS5sb2codGhpcy5taWRwb2ludF93ZWlnaHQpO1xuICAgICAgcmV0dXJuIG5ldyBQb2ludCh7XG4gICAgICAgIHg6IHRoaXMubWlkcG9pbnRfd2VpZ2h0ICogeHMueCArICgxIC0gdGhpcy5taWRwb2ludF93ZWlnaHQpICogeXMueCxcbiAgICAgICAgeTogdGhpcy5taWRwb2ludF93ZWlnaHQgKiB4cy55ICsgKDEgLSB0aGlzLm1pZHBvaW50X3dlaWdodCkgKiB5cy55LFxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBQb2ludCh7XG4gICAgICAgIHg6ICh4cy54ICsgeXMueCkgLyAyLFxuICAgICAgICB5OiAoeHMueSArIHlzLnkpIC8gMixcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgYWJzdHJhY3QgcmVuZGVyKCk6IFBvaW50W107XG5cbiAgYWJzdHJhY3Qgcm90YXRlKCk6IHZvaWQ7XG5cbiAgYWJzdHJhY3Qgc3RlcF9vcHRpb25zKHVuaWZvcm1fd2VpZ2h0czogYm9vbGVhbik6IG51bWJlcjtcblxuICBhYnN0cmFjdCBuZXh0X3N0ZXAoaW5kZXg6IG51bWJlciwgdW5pZm9ybV93ZWlnaHRzOiBib29sZWFuKTogU2hhcGVbXTtcblxuICByZW5kZXJfcG9pbnRhcnJheSgpOiBQb2ludEFycmF5IHtcbiAgICByZXR1cm4gbmV3IFBvaW50QXJyYXkodGhpcy5yZW5kZXIoKS5mbGF0TWFwKChwdCkgPT4ge3JldHVybiBbcHQueCwgcHQueV19KSk7XG4gIH1cblxuICAvLyByZXR1cm5zIHRoZSBudW1iZXIgb2Ygc3ViLXNoYXBlcyBkcmF3blxuICBmcmFjdGFsaXplKFxuICAgIG1heF9kZXB0aDogbnVtYmVyLFxuICAgIHBpeGVsX3NpemU6IG51bWJlcixcbiAgICBzdHJva2Vfd2lkdGg6IG51bWJlcixcbiAgICB1bmlmb3JtX3dlaWdodHM6IGJvb2xlYW4sXG4gICAgbWlkcG9pbnRfd2VpZ2h0OiBudW1iZXIgfCB1bmRlZmluZWQsXG4gICAgLy8gYm9yZGVyX3BpeGVsczogbnVtYmVyLCAvLyBUT0RPID9cbiAgKTogbnVtYmVyIHtcbiAgICB2YXIgZHJhdyA9IFNWRygpLmFkZFRvKCdib2R5Jykuc2l6ZShwaXhlbF9zaXplLCBwaXhlbF9zaXplKTtcbiAgICBkcmF3LnBvbHlsaW5lKHRoaXMucmVuZGVyX3BvaW50YXJyYXkoKSkuZmlsbCgnbm9uZScpLnN0cm9rZSh7IGNvbG9yOiAnIzAwMCcsIHdpZHRoOiBzdHJva2Vfd2lkdGggfSk7XG5cbiAgICAvLyBbc2hhcGUsIGRlcHRoXVxuICAgIHZhciBudW1fc3ViX3NoYXBlcyA9IDA7XG4gICAgdmFyIHVuZmluaXNoZWRfc2hhcGVzOiBbU2hhcGUsIG51bWJlcl1bXSA9IFtbdGhpcywgMF1dO1xuICAgIHdoaWxlICh1bmZpbmlzaGVkX3NoYXBlcy5sZW5ndGgpIHtcbiAgICAgIGxldCBbY3VycmVudF9zaGFwZSwgY3VycmVudF9kZXB0aF0gPSB1bmZpbmlzaGVkX3NoYXBlcy5wb3AoKTtcbiAgICAgIG51bV9zdWJfc2hhcGVzKys7XG4gICAgICBkcmF3LnBvbHlsaW5lKGN1cnJlbnRfc2hhcGUucmVuZGVyX3BvaW50YXJyYXkoKSkuZmlsbCgnbm9uZScpLnN0cm9rZSh7IGNvbG9yOiAnIzAwMCcsIHdpZHRoOiBzdHJva2Vfd2lkdGggfSk7XG5cbiAgICAgIGlmIChjdXJyZW50X2RlcHRoIDw9IG1heF9kZXB0aCkge1xuICAgICAgICBsZXQgbmV4dF9yYW5kb21fbnVtID0gY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDMyQXJyYXkoMSkpWzBdLzIqKjMyO1xuICAgICAgICBsZXQgbWF4ID0gY3VycmVudF9zaGFwZS5zdGVwX29wdGlvbnModW5pZm9ybV93ZWlnaHRzKTtcbiAgICAgICAgbGV0IG5leHRfc3RlcF9pbmRleCA9IE1hdGguZmxvb3IobmV4dF9yYW5kb21fbnVtICogbWF4KTtcbiAgICAgICAgdW5maW5pc2hlZF9zaGFwZXMucHVzaCguLi5jdXJyZW50X3NoYXBlLm5leHRfc3RlcChuZXh0X3N0ZXBfaW5kZXgsIHVuaWZvcm1fd2VpZ2h0cykubWFwKCh4KSA9PiB7XG4gICAgICAgICAgbGV0IHJldDogW1NoYXBlLCBudW1iZXJdID0gW3gsIGN1cnJlbnRfZGVwdGggKyAxXTtcbiAgICAgICAgICByZXR1cm4gcmV0XG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVtX3N1Yl9zaGFwZXNcbiAgfVxuXG59XG5cblxuY2xhc3MgVHJpYW5nbGUgZXh0ZW5kcyBTaGFwZSB7XG4gIG1pZHBvaW50X3dlaWdodDogbnVtYmVyIHwgbnVsbDtcbiAgcHQwOiBQb2ludDtcbiAgcHQxOiBQb2ludDtcbiAgcHQyOiBQb2ludDtcblxuICBjb25zdHJ1Y3RvcihwdDA6IFBvaW50LCBwdDE6IFBvaW50LCBwdDI6IFBvaW50LCBtaWRwb2ludF93ZWlnaHQ6IG51bWJlciB8IG51bGwpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMucHQwID0gcHQwO1xuICAgIHRoaXMucHQxID0gcHQxO1xuICAgIHRoaXMucHQyID0gcHQyO1xuICAgIHRoaXMubWlkcG9pbnRfd2VpZ2h0ID0gbWlkcG9pbnRfd2VpZ2h0O1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiBbdGhpcy5wdDAsIHRoaXMucHQxLCB0aGlzLnB0Ml1cbiAgfVxuXG4gIHJvdGF0ZSgpIHtcbiAgICBsZXQgcG9pbnRzID0gW3RoaXMucHQwLCB0aGlzLnB0MSwgdGhpcy5wdDJdO1xuICAgIFt0aGlzLnB0MSwgdGhpcy5wdDIsIHRoaXMucHQwXSA9IHBvaW50cztcbiAgfVxuXG4gIC8vIHAwXG4gIC8vIHxcXFxuICAvLyB8IFxcXG4gIC8vIHwgIFxcXG4gIC8vIHwgICBcXFxuICAvLyB8IEEgIFxcXG4gIC8vIHwgICAgIFxcXG4gIC8vIHw8cDIwX19cXCA8cDAxXG4gIC8vIHwgXFwgTSAgL1xcXG4gIC8vIHwgIFxcICAvICBcXFxuICAvLyB8IEMgXFwvIEIgIFxcXG4gIC8vIC0tLS0tLS0tLS0tIHAxXG4gIC8vIHAyICAgcDEyXG4gIHRyaXNlY3QoKTogW1RyaWFuZ2xlLCBUcmlhbmdsZSwgVHJpYW5nbGUsIFRyaWFuZ2xlXSB7XG4gICAgbGV0IHB0MCA9IHRoaXMucHQwO1xuICAgIGxldCBwdDEgPSB0aGlzLnB0MTtcbiAgICBsZXQgcHQyID0gdGhpcy5wdDI7XG5cbiAgICBsZXQgcHQwMSA9IHRoaXMubWlkcG9pbnQocHQwLCBwdDEpO1xuICAgIGxldCBwdDEyID0gdGhpcy5taWRwb2ludChwdDEsIHB0Mik7XG4gICAgbGV0IHB0MjAgPSB0aGlzLm1pZHBvaW50KHB0MiwgcHQwKTtcblxuICAgIGxldCB0cmlhbmdsZV9BID0gbmV3IFRyaWFuZ2xlKHB0MCwgcHQwMSwgcHQyMCwgdGhpcy5taWRwb2ludF93ZWlnaHQpO1xuICAgIGxldCB0cmlhbmdsZV9CID0gbmV3IFRyaWFuZ2xlKHB0MDEsIHB0MSwgcHQxMiwgdGhpcy5taWRwb2ludF93ZWlnaHQpO1xuICAgIGxldCB0cmlhbmdsZV9DID0gbmV3IFRyaWFuZ2xlKHB0MjAsIHB0MTIsIHB0MiwgdGhpcy5taWRwb2ludF93ZWlnaHQpO1xuICAgIGxldCB0cmlhbmdsZV9NID0gbmV3IFRyaWFuZ2xlKHB0MDEsIHB0MTIsIHB0MjAsIHRoaXMubWlkcG9pbnRfd2VpZ2h0KTtcblxuICAgIHJldHVybiBbXG4gICAgICB0cmlhbmdsZV9BLFxuICAgICAgdHJpYW5nbGVfQixcbiAgICAgIHRyaWFuZ2xlX0MsXG4gICAgICB0cmlhbmdsZV9NXVxuICB9XG5cbiAgLy8gICAgIHAwXG4gIC8vICAgICB8XFxcbiAgLy8gICAgIHwgXFxcbiAgLy8gICAgIHwgIFxcXG4gIC8vICAgICB8ICAgXFxcbiAgLy8gICAgIHwgQSAgXFxcbiAgLy8gICAgIHwgICAgIFxcXG4gIC8vIHAyMD58X3AyMDFfXFwgPHAwMVxuICAvLyAgICAgfCAgIHwgICBcXFxuICAvLyAgICAgfCBDIHwgQiAgXFxcbiAgLy8gICAgIHwgICB8ICAgICBcXFxuICAvLyAgICAgLS0tLS0tLS0tLS0gcDFcbiAgLy8gcDIgICBwMTJcbiAgdF9zcGxpdCgpOiBbVHJpYW5nbGUsIFF1YWRyaWxhdGVyYWwsIFF1YWRyaWxhdGVyYWxdIHtcbiAgICBsZXQgcHQwID0gdGhpcy5wdDA7XG4gICAgbGV0IHB0MSA9IHRoaXMucHQxO1xuICAgIGxldCBwdDIgPSB0aGlzLnB0MjtcblxuICAgIGxldCBwdDAxID0gdGhpcy5taWRwb2ludChwdDAsIHB0MSk7XG4gICAgbGV0IHB0MTIgPSB0aGlzLm1pZHBvaW50KHB0MSwgcHQyKTtcbiAgICBsZXQgcHQyMCA9IHRoaXMubWlkcG9pbnQocHQyLCBwdDApO1xuICAgIGxldCBwdDIwMSA9IHRoaXMubWlkcG9pbnQocHQwMSwgcHQyMCk7XG5cbiAgICBsZXQgdHJpYW5nbGVfQSA9IG5ldyBUcmlhbmdsZShwdDAsIHB0MDEsIHB0MjAsIHRoaXMubWlkcG9pbnRfd2VpZ2h0KTtcbiAgICBsZXQgcXVhZHJpbGF0ZXJhbF9CID0gbmV3IFF1YWRyaWxhdGVyYWwocHQyMDEsIHB0MDEsIHB0MSwgcHQxMiwgdGhpcy5taWRwb2ludF93ZWlnaHQpO1xuICAgIGxldCBxdWFkcmlsYXRlcmFsX0MgPSBuZXcgUXVhZHJpbGF0ZXJhbChwdDIwLCBwdDIwMSwgcHQxMiwgcHQyLCB0aGlzLm1pZHBvaW50X3dlaWdodCk7XG5cbiAgICByZXR1cm4gW1xuICAgICAgdHJpYW5nbGVfQSxcbiAgICAgIHF1YWRyaWxhdGVyYWxfQixcbiAgICAgIHF1YWRyaWxhdGVyYWxfQ11cbiAgfVxuXG4gIHN0ZXBfb3B0aW9ucyh1bmlmb3JtX3dlaWdodHM6IGJvb2xlYW4pIHtcbiAgICBpZiAodW5pZm9ybV93ZWlnaHRzKSB7XG4gICAgICByZXR1cm4gNVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gOVxuICAgIH1cbiAgfVxuXG4gIG5leHRfc3RlcChpbmRleDogbnVtYmVyLCB1bmlmb3JtX3dlaWdodHM6IGJvb2xlYW4pOiBTaGFwZVtdIHtcbiAgICBpZiAodW5pZm9ybV93ZWlnaHRzKSB7XG4gICAgICBzd2l0Y2ggKGluZGV4KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICByZXR1cm4gdGhpcy50cmlzZWN0KClcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIHJldHVybiB0aGlzLnRfc3BsaXQoKVxuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgdGhpcy5yb3RhdGUoKTtcbiAgICAgICAgICByZXR1cm4gdGhpcy50X3NwbGl0KClcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIHRoaXMucm90YXRlKCk7XG4gICAgICAgICAgdGhpcy5yb3RhdGUoKTtcbiAgICAgICAgICByZXR1cm4gdGhpcy50X3NwbGl0KClcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIHJldHVybiBbXVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignbmV4dF9zdGVwOiBpbmRleCBvdXQgb2YgcmFuZ2UnKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzd2l0Y2ggKGluZGV4KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgcmV0dXJuIHRoaXMudHJpc2VjdCgpXG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICByZXR1cm4gdGhpcy50X3NwbGl0KClcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIHRoaXMucm90YXRlKCk7XG4gICAgICAgICAgcmV0dXJuIHRoaXMudF9zcGxpdCgpXG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICB0aGlzLnJvdGF0ZSgpO1xuICAgICAgICAgIHRoaXMucm90YXRlKCk7XG4gICAgICAgICAgcmV0dXJuIHRoaXMudF9zcGxpdCgpXG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgcmV0dXJuIFtdXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCduZXh0X3N0ZXA6IGluZGV4IG91dCBvZiByYW5nZScpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbn1cblxuXG5jbGFzcyBRdWFkcmlsYXRlcmFsIGV4dGVuZHMgU2hhcGUge1xuICBtaWRwb2ludF93ZWlnaHQ6IG51bWJlciB8IG51bGw7XG4gIHB0MDogUG9pbnQ7XG4gIHB0MTogUG9pbnQ7XG4gIHB0MjogUG9pbnQ7XG4gIHB0MzogUG9pbnQ7XG5cbiAgY29uc3RydWN0b3IocHQwOiBQb2ludCwgcHQxOiBQb2ludCwgcHQyOiBQb2ludCwgcHQzOiBQb2ludCwgbWlkcG9pbnRfd2VpZ2h0OiBudW1iZXIgfCBudWxsKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnB0MCA9IHB0MDtcbiAgICB0aGlzLnB0MSA9IHB0MTtcbiAgICB0aGlzLnB0MiA9IHB0MjtcbiAgICB0aGlzLnB0MyA9IHB0MztcbiAgICB0aGlzLm1pZHBvaW50X3dlaWdodCA9IG1pZHBvaW50X3dlaWdodDtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gW3RoaXMucHQwLCB0aGlzLnB0MSwgdGhpcy5wdDIsIHRoaXMucHQzXVxuICB9XG5cbiAgcm90YXRlKCkge1xuICAgIGxldCBwb2ludHMgPSBbdGhpcy5wdDAsIHRoaXMucHQxLCB0aGlzLnB0MiwgdGhpcy5wdDNdO1xuICAgIFt0aGlzLnB0MSwgdGhpcy5wdDIsIHRoaXMucHQzLCB0aGlzLnB0MF0gPSBwb2ludHM7XG4gIH1cblxuICBzdGVwX29wdGlvbnModW5pZm9ybV93ZWlnaHRzOiBib29sZWFuKSB7XG4gICAgcmV0dXJuIDFcbiAgfVxuXG4gIG5leHRfc3RlcChpbmRleDogbnVtYmVyLCB1bmlmb3JtX3dlaWdodHM6IGJvb2xlYW4pOiBTaGFwZVtdIHtcbiAgICBzd2l0Y2ggKGluZGV4KSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIHJldHVybiBbXVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCduZXh0X3N0ZXA6IGluZGV4IG91dCBvZiByYW5nZScpXG4gICAgfVxuICB9XG5cbn1cblxuXG5jbGFzcyBTcXVhcmUgZXh0ZW5kcyBRdWFkcmlsYXRlcmFsIHtcblxuICAvLyAgICAgcDAgICAgIHAwMSAgICAgIHAxXG4gIC8vICAgICBfX19fX19fX19fX19fX19fX1xuICAvLyAgICAgfCAgICAgIC8gXFwgICAgICB8XG4gIC8vICAgICB8IEEgICAvICAgXFwgIEIgIHxcbiAgLy8gICAgIHwgICAgLyAgICAgXFwgICAgfFxuICAvLyAgICAgfCAgIC8gICAgICAgXFwgICB8XG4gIC8vICAgICB8ICAvICAgICAgICAgXFwgIHxcbiAgLy8gICAgIHwgLyAgICAgICAgICAgXFwgfFxuICAvLyBwMzAgfC8gICAgICBNICAgICAgXFx8IHAxMlxuICAvLyAgICAgfFxcICAgICAgICAgICAgIC98XG4gIC8vICAgICB8IFxcICAgICAgICAgICAvIHxcbiAgLy8gICAgIHwgIFxcICAgICAgICAgLyAgfFxuICAvLyAgICAgfCAgIFxcICAgICAgIC8gICB8XG4gIC8vICAgICB8ICAgIFxcICAgICAvICAgIHxcbiAgLy8gICAgIHwgRCAgIFxcICAgLyAgQyAgfFxuICAvLyAgICAgfCAgICAgIFxcIC8gICAgICB8XG4gIC8vICAgICB8LS0tLS0tLS0tLS0tLS0tfCBwMlxuICAvLyAgICAgcDMgICAgIHAyM1xuICBxdWFkc2VjdCgpOiBbVHJpYW5nbGUsIFRyaWFuZ2xlLCBUcmlhbmdsZSwgVHJpYW5nbGUsIFNxdWFyZV0ge1xuICAgIGxldCBwdDAgPSB0aGlzLnB0MDtcbiAgICBsZXQgcHQxID0gdGhpcy5wdDE7XG4gICAgbGV0IHB0MiA9IHRoaXMucHQyO1xuICAgIGxldCBwdDMgPSB0aGlzLnB0MztcblxuICAgIGxldCBwdDAxID0gdGhpcy5taWRwb2ludCh0aGlzLnB0MCwgdGhpcy5wdDEpO1xuICAgIGxldCBwdDEyID0gdGhpcy5taWRwb2ludCh0aGlzLnB0MSwgdGhpcy5wdDIpO1xuICAgIGxldCBwdDIzID0gdGhpcy5taWRwb2ludCh0aGlzLnB0MiwgdGhpcy5wdDMpO1xuICAgIGxldCBwdDMwID0gdGhpcy5taWRwb2ludCh0aGlzLnB0MywgdGhpcy5wdDApO1xuXG4gICAgbGV0IHRyaWFuZ2xlX0EgPSBuZXcgVHJpYW5nbGUocHQwLCBwdDAxLCBwdDMwLCB0aGlzLm1pZHBvaW50X3dlaWdodCk7XG4gICAgbGV0IHRyaWFuZ2xlX0IgPSBuZXcgVHJpYW5nbGUocHQwMSwgcHQxLCBwdDEyLCB0aGlzLm1pZHBvaW50X3dlaWdodCk7XG4gICAgbGV0IHRyaWFuZ2xlX0MgPSBuZXcgVHJpYW5nbGUocHQxMiwgcHQyLCBwdDIzLCB0aGlzLm1pZHBvaW50X3dlaWdodCk7XG4gICAgbGV0IHRyaWFuZ2xlX0QgPSBuZXcgVHJpYW5nbGUocHQzMCwgcHQyMywgcHQzLCB0aGlzLm1pZHBvaW50X3dlaWdodCk7XG4gICAgbGV0IHNxdWFyZV9NID0gbmV3IFNxdWFyZShwdDAxLCBwdDEyLCBwdDIzLCBwdDMwLCB0aGlzLm1pZHBvaW50X3dlaWdodCk7XG5cbiAgICByZXR1cm4gW1xuICAgICAgdHJpYW5nbGVfQSxcbiAgICAgIHRyaWFuZ2xlX0IsXG4gICAgICB0cmlhbmdsZV9DLFxuICAgICAgdHJpYW5nbGVfRCxcbiAgICAgIHNxdWFyZV9NXVxuICB9XG5cbiAgLy8gcDAgICAgICAgICAgICAgIHAxXG4gIC8vIF9fX19fX19fX19fX19fX19fXG4gIC8vIHxcXCAgICAgICAgICAgICAgfFxuICAvLyB8IFxcICAgICAgICAgICAgIHxcbiAgLy8gfCAgXFwgICAgICAgICAgICB8XG4gIC8vIHwgICBcXCAgICAgIEEgICAgfFxuICAvLyB8ICAgIFxcICAgICAgICAgIHxcbiAgLy8gfCAgICAgXFwgICAgICAgICB8XG4gIC8vIHwgICAgICBcXCAgICAgICAgfFxuICAvLyB8ICAgICAgIFxcICAgICAgIHxcbiAgLy8gfCAgICAgICAgXFwgICAgICB8XG4gIC8vIHwgICAgICAgICBcXCAgICAgfFxuICAvLyB8ICAgICAgICAgIFxcICAgIHxcbiAgLy8gfCAgIEIgICAgICAgXFwgICB8XG4gIC8vIHwgICAgICAgICAgICBcXCAgfFxuICAvLyB8ICAgICAgICAgICAgIFxcIHxcbiAgLy8gfC0tLS0tLS0tLS0tLS0tLXwgcDJcbiAgLy8gcDNcbiAgYmlzZWN0KCk6IFtUcmlhbmdsZSwgVHJpYW5nbGVdIHtcbiAgICBsZXQgcHQwID0gdGhpcy5wdDA7XG4gICAgbGV0IHB0MSA9IHRoaXMucHQxO1xuICAgIGxldCBwdDIgPSB0aGlzLnB0MjtcbiAgICBsZXQgcHQzID0gdGhpcy5wdDM7XG5cbiAgICBsZXQgdHJpYW5nbGVfQSA9IG5ldyBUcmlhbmdsZShwdDAsIHB0MSwgcHQyLCB0aGlzLm1pZHBvaW50X3dlaWdodCk7XG4gICAgbGV0IHRyaWFuZ2xlX0IgPSBuZXcgVHJpYW5nbGUocHQwLCBwdDIsIHB0MywgdGhpcy5taWRwb2ludF93ZWlnaHQpO1xuXG4gICAgcmV0dXJuIFtcbiAgICAgIHRyaWFuZ2xlX0EsXG4gICAgICB0cmlhbmdsZV9CXVxuICB9XG5cbiAgc3RlcF9vcHRpb25zKHVuaWZvcm1fd2VpZ2h0czogYm9vbGVhbikge1xuICAgIGlmICh1bmlmb3JtX3dlaWdodHMpIHtcbiAgICAgIHJldHVybiA0XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiA2XG4gICAgfVxuICB9XG5cbiAgbmV4dF9zdGVwKGluZGV4OiBudW1iZXIsIHVuaWZvcm1fd2VpZ2h0czogYm9vbGVhbik6IFNoYXBlW10ge1xuICAgIGlmICh1bmlmb3JtX3dlaWdodHMpIHtcbiAgICAgIHN3aXRjaCAoaW5kZXgpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIHJldHVybiB0aGlzLnF1YWRzZWN0KClcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIHJldHVybiB0aGlzLmJpc2VjdCgpXG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICB0aGlzLnJvdGF0ZSgpO1xuICAgICAgICAgIHJldHVybiB0aGlzLmJpc2VjdCgpXG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICByZXR1cm4gW11cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ25leHRfc3RlcDogaW5kZXggb3V0IG9mIHJhbmdlJylcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc3dpdGNoIChpbmRleCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICByZXR1cm4gdGhpcy5xdWFkc2VjdCgpXG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICByZXR1cm4gdGhpcy5iaXNlY3QoKVxuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgdGhpcy5yb3RhdGUoKTtcbiAgICAgICAgICByZXR1cm4gdGhpcy5iaXNlY3QoKVxuICAgICAgICBjYXNlIDQ6XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICByZXR1cm4gW11cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ25leHRfc3RlcDogaW5kZXggb3V0IG9mIHJhbmdlJylcbiAgICAgIH1cbiAgICB9XG4gIH1cblxufVxuXG5cbmFzeW5jIGZ1bmN0aW9uIG1haW4oKSB7XG4gIGxldCBwaXhlbF9zaXplID0gTWF0aC5taW4od2luZG93LmlubmVySGVpZ2h0LCB3aW5kb3cuaW5uZXJXaWR0aCk7XG4gIGNvbnNvbGUubG9nKCdwaXhlbCBzaXplOicsIHBpeGVsX3NpemUpO1xuXG4gIGNvbnN0IHB0MCA9IG5ldyBQb2ludCh7eDogMCwgeTogcGl4ZWxfc2l6ZX0pO1xuICBjb25zdCBwdDEgPSBuZXcgUG9pbnQoe3g6IHBpeGVsX3NpemUsIHk6IHBpeGVsX3NpemV9KTtcbiAgY29uc3QgcHQyID0gbmV3IFBvaW50KHt4OiBwaXhlbF9zaXplLCB5OiAwfSk7XG4gIGNvbnN0IHB0MyA9IG5ldyBQb2ludCh7eDogMCwgeTogMH0pO1xuICBjb25zdCBmcmFjdGFsX3NlZWQgPSBuZXcgU3F1YXJlKHB0MCwgcHQxLCBwdDIsIHB0MywgdGhpcy5taWRwb2ludF93ZWlnaHQpO1xuXG4gIGNvbnN0IHVybF9wYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xuICB2YXIgbWF4X2RlcHRoID0gTnVtYmVyKHVybF9wYXJhbXMuZ2V0KCdkZXB0aCcpKTtcbiAgaWYgKCFtYXhfZGVwdGgpIHtcbiAgICBtYXhfZGVwdGggPSAzXG4gIH1cbiAgdmFyIHN0cm9rZV93aWR0aCA9IE51bWJlcih1cmxfcGFyYW1zLmdldCgnc3Ryb2tlJykpO1xuICBpZiAoIXN0cm9rZV93aWR0aCkge1xuICAgIHN0cm9rZV93aWR0aCA9IDNcbiAgfVxuICB2YXIgbWlkcG9pbnRfd2VpZ2h0ID0gTnVtYmVyKHVybF9wYXJhbXMuZ2V0KCdtaWRwb2ludCcpKTtcbiAgY29uc3QgdW5pZm9ybV93ZWlnaHRzX3BhcmFtID0gdXJsX3BhcmFtcy5nZXQoJ3VuaWZvcm0nKTtcbiAgY29uc3QgdW5pZm9ybV93ZWlnaHRzID0gIXVuaWZvcm1fd2VpZ2h0c19wYXJhbSB8fCAodW5pZm9ybV93ZWlnaHRzX3BhcmFtID09ICd0Jyk7XG5cbiAgY29uc29sZS5sb2coJ21heF9kZXB0aDonLCBtYXhfZGVwdGgpO1xuICBjb25zb2xlLmxvZygnc3Ryb2tlX3dpZHRoOicsIHN0cm9rZV93aWR0aCk7XG4gIGNvbnNvbGUubG9nKCdtaWRwb2ludF93ZWlnaHQ6JywgbWlkcG9pbnRfd2VpZ2h0KTtcbiAgY29uc29sZS5sb2coJ3VuaWZvcm1fd2VpZ2h0czonLCB1bmlmb3JtX3dlaWdodHMpO1xuXG4gIHZhciBudW1fc2hhcGVzID0gZnJhY3RhbF9zZWVkLmZyYWN0YWxpemUobWF4X2RlcHRoLCBwaXhlbF9zaXplLCBzdHJva2Vfd2lkdGgsIHVuaWZvcm1fd2VpZ2h0cywgbWlkcG9pbnRfd2VpZ2h0KTtcbiAgY29uc29sZS5sb2coJ251bV9zaGFwZXMnLCBudW1fc2hhcGVzKTtcbiAgd2hpbGUgKG51bV9zaGFwZXMgPCAyKSB7XG4gICAgLy8gcmVtb3ZlIHByZXZpb3VzIFNWR1xuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZG9jdW1lbnQuYm9keS5jaGlsZHJlblswXSk7XG5cbiAgICAvLyByZS1nZW5lcmF0ZVxuICAgIG51bV9zaGFwZXMgPSBmcmFjdGFsX3NlZWQuZnJhY3RhbGl6ZShtYXhfZGVwdGgsIHBpeGVsX3NpemUsIHN0cm9rZV93aWR0aCwgdW5pZm9ybV93ZWlnaHRzLCBtaWRwb2ludF93ZWlnaHQpO1xuICAgIGNvbnNvbGUubG9nKCdudW1fc2hhcGVzJywgbnVtX3NoYXBlcyk7XG4gIH1cblxufVxuXG4vLyBydW4gbWFpbiBvbiBsb2FkIChhZnRlciA8Ym9keT4gZXhpc3RzLi4pXG53aW5kb3cub25sb2FkID0gbWFpbjtcblxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBfX3dlYnBhY2tfbW9kdWxlc19fO1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gbm8gYmFzZVVSSVxuXG4vLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuLy8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4vLyBbcmVzb2x2ZSwgcmVqZWN0LCBQcm9taXNlXSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbnZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG5cdDE3OTogMFxufTtcblxuLy8gbm8gY2h1bmsgb24gZGVtYW5kIGxvYWRpbmdcblxuLy8gbm8gcHJlZmV0Y2hpbmdcblxuLy8gbm8gcHJlbG9hZGVkXG5cbi8vIG5vIEhNUlxuXG4vLyBubyBITVIgbWFuaWZlc3RcblxuX193ZWJwYWNrX3JlcXVpcmVfXy5PLmogPSAoY2h1bmtJZCkgPT4gKGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9PT0gMCk7XG5cbi8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xudmFyIHdlYnBhY2tKc29ucENhbGxiYWNrID0gKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uLCBkYXRhKSA9PiB7XG5cdHZhciBbY2h1bmtJZHMsIG1vcmVNb2R1bGVzLCBydW50aW1lXSA9IGRhdGE7XG5cdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuXHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcblx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMDtcblx0aWYoY2h1bmtJZHMuc29tZSgoaWQpID0+IChpbnN0YWxsZWRDaHVua3NbaWRdICE9PSAwKSkpIHtcblx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcblx0XHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG5cdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX18ubVttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKHJ1bnRpbWUpIHZhciByZXN1bHQgPSBydW50aW1lKF9fd2VicGFja19yZXF1aXJlX18pO1xuXHR9XG5cdGlmKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKSBwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbihkYXRhKTtcblx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcblx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkgJiYgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG5cdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0oKTtcblx0XHR9XG5cdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMDtcblx0fVxuXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5PKHJlc3VsdCk7XG59XG5cbnZhciBjaHVua0xvYWRpbmdHbG9iYWwgPSBzZWxmW1wid2VicGFja0NodW5rc3F1YXJlX2ZyYWN0YWxcIl0gPSBzZWxmW1wid2VicGFja0NodW5rc3F1YXJlX2ZyYWN0YWxcIl0gfHwgW107XG5jaHVua0xvYWRpbmdHbG9iYWwuZm9yRWFjaCh3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIDApKTtcbmNodW5rTG9hZGluZ0dsb2JhbC5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCBjaHVua0xvYWRpbmdHbG9iYWwucHVzaC5iaW5kKGNodW5rTG9hZGluZ0dsb2JhbCkpOyIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgZGVwZW5kcyBvbiBvdGhlciBsb2FkZWQgY2h1bmtzIGFuZCBleGVjdXRpb24gbmVlZCB0byBiZSBkZWxheWVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18uTyh1bmRlZmluZWQsIFs1MDBdLCAoKSA9PiAoX193ZWJwYWNrX3JlcXVpcmVfXyg0MTcpKSlcbl9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8oX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4iXSwibmFtZXMiOlsiZGVmZXJyZWQiLCJtaWRwb2ludCIsInhzIiwieXMiLCJ0aGlzIiwibWlkcG9pbnRfd2VpZ2h0IiwiY29uc29sZSIsImxvZyIsIngiLCJ5IiwicmVuZGVyX3BvaW50YXJyYXkiLCJyZW5kZXIiLCJmbGF0TWFwIiwicHQiLCJmcmFjdGFsaXplIiwibWF4X2RlcHRoIiwicGl4ZWxfc2l6ZSIsInN0cm9rZV93aWR0aCIsInVuaWZvcm1fd2VpZ2h0cyIsImRyYXciLCJhZGRUbyIsInNpemUiLCJwb2x5bGluZSIsImZpbGwiLCJzdHJva2UiLCJjb2xvciIsIndpZHRoIiwibnVtX3N1Yl9zaGFwZXMiLCJ1bmZpbmlzaGVkX3NoYXBlcyIsInBvcCIsImN1cnJlbnRfc2hhcGUiLCJjdXJyZW50X2RlcHRoIiwibmV4dF9yYW5kb21fbnVtIiwiY3J5cHRvIiwiZ2V0UmFuZG9tVmFsdWVzIiwiVWludDMyQXJyYXkiLCJtYXgiLCJzdGVwX29wdGlvbnMiLCJuZXh0X3N0ZXBfaW5kZXgiLCJNYXRoIiwiZmxvb3IiLCJwdXNoIiwibmV4dF9zdGVwIiwibWFwIiwibGVuZ3RoIiwicHQwIiwicHQxIiwicHQyIiwicm90YXRlIiwicG9pbnRzIiwidHJpc2VjdCIsInB0MDEiLCJwdDEyIiwicHQyMCIsIlRyaWFuZ2xlIiwidF9zcGxpdCIsInB0MjAxIiwiUXVhZHJpbGF0ZXJhbCIsImluZGV4IiwiRXJyb3IiLCJTaGFwZSIsInB0MyIsInF1YWRzZWN0IiwicHQyMyIsInB0MzAiLCJTcXVhcmUiLCJiaXNlY3QiLCJ3aW5kb3ciLCJvbmxvYWQiLCJtaW4iLCJpbm5lckhlaWdodCIsImlubmVyV2lkdGgiLCJmcmFjdGFsX3NlZWQiLCJ1cmxfcGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwibG9jYXRpb24iLCJzZWFyY2giLCJOdW1iZXIiLCJnZXQiLCJ1bmlmb3JtX3dlaWdodHNfcGFyYW0iLCJudW1fc2hhcGVzIiwiZG9jdW1lbnQiLCJib2R5IiwicmVtb3ZlQ2hpbGQiLCJjaGlsZHJlbiIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwibSIsIk8iLCJyZXN1bHQiLCJjaHVua0lkcyIsImZuIiwicHJpb3JpdHkiLCJub3RGdWxmaWxsZWQiLCJJbmZpbml0eSIsImkiLCJmdWxmaWxsZWQiLCJqIiwiT2JqZWN0Iiwia2V5cyIsImV2ZXJ5Iiwia2V5Iiwic3BsaWNlIiwiciIsImQiLCJkZWZpbml0aW9uIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJpbnN0YWxsZWRDaHVua3MiLCJjaHVua0lkIiwid2VicGFja0pzb25wQ2FsbGJhY2siLCJwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiIsImRhdGEiLCJtb3JlTW9kdWxlcyIsInJ1bnRpbWUiLCJzb21lIiwiaWQiLCJjaHVua0xvYWRpbmdHbG9iYWwiLCJzZWxmIiwiZm9yRWFjaCIsImJpbmQiLCJfX3dlYnBhY2tfZXhwb3J0c19fIl0sInNvdXJjZVJvb3QiOiIifQ==