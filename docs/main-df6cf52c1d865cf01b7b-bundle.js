(()=>{"use strict";var t,e={417:(t,e,n)=>{var r,o=n(500),i=(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function p(t,e){return new o.E9({x:(t.x+e.x)/2,y:(t.y+e.y)/2})}var s=function(){function t(){}return t.prototype.render_pointarray=function(){return new o.VC(this.render().flatMap((function(t){return[t.x,t.y]})))},t.prototype.fractalize=function(t,e,n){var r=(0,o.Wj)().addTo("body").size(e,e);r.polyline(this.render_pointarray()).fill("none").stroke({color:"#000",width:n});for(var i=0,p=[[this,0]],s=function(){var e=p.pop(),o=e[0],s=e[1];if(i++,r.polyline(o.render_pointarray()).fill("none").stroke({color:"#000",width:n}),s<=t){var a=crypto.getRandomValues(new Uint32Array(1))[0]/Math.pow(2,32),u=o.step_options(),c=Math.floor(a*u);p.push.apply(p,o.next_step(c).map((function(t){return[t,s+1]})))}};p.length;)s();return i},t}(),a=function(t){function e(e,n,r){var o=t.call(this)||this;return o.pt0=e,o.pt1=n,o.pt2=r,o}return i(e,t),e.prototype.render=function(){return[this.pt0,this.pt1,this.pt2]},e.prototype.rotate=function(){var t=[this.pt0,this.pt1,this.pt2];this.pt1=t[0],this.pt2=t[1],this.pt0=t[2]},e.prototype.trisect=function(){var t=this.pt0,n=this.pt1,r=this.pt2,o=p(t,n),i=p(n,r),s=p(r,t);return[new e(t,o,s),new e(o,n,i),new e(s,i,r),new e(o,i,s)]},e.prototype.t_split=function(){var t=this.pt0,n=this.pt1,r=this.pt2,o=p(t,n),i=p(n,r),s=p(r,t),a=p(o,s);return[new e(t,o,s),new u(a,o,n,i),new u(s,a,i,r)]},e.prototype.step_options=function(){return 5},e.prototype.next_step=function(t){switch(t){case 0:return this.trisect();case 1:return this.t_split();case 2:return this.rotate(),this.t_split();case 3:return this.rotate(),this.rotate(),this.t_split();case 4:return[];default:throw new Error("next_step: index out of range")}},e}(s),u=function(t){function e(e,n,r,o){var i=t.call(this)||this;return i.pt0=e,i.pt1=n,i.pt2=r,i.pt3=o,i}return i(e,t),e.prototype.render=function(){return[this.pt0,this.pt1,this.pt2,this.pt3]},e.prototype.rotate=function(){var t=[this.pt0,this.pt1,this.pt2,this.pt3];this.pt1=t[0],this.pt2=t[1],this.pt3=t[2],this.pt0=t[3]},e.prototype.step_options=function(){return 1},e.prototype.next_step=function(t){if(0===t)return[];throw new Error("next_step: index out of range")},e}(s),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.quadsect=function(){var t=this.pt0,n=this.pt1,r=this.pt2,o=this.pt3,i=p(this.pt0,this.pt1),s=p(this.pt1,this.pt2),u=p(this.pt2,this.pt3),c=p(this.pt3,this.pt0);return[new a(t,i,c),new a(i,n,s),new a(s,r,u),new a(c,u,o),new e(i,s,u,c)]},e.prototype.bisect=function(){var t=this.pt0,e=this.pt1,n=this.pt2,r=this.pt3;return[new a(t,e,n),new a(t,n,r)]},e.prototype.step_options=function(){return 4},e.prototype.next_step=function(t){switch(t){case 0:return this.quadsect();case 1:return this.bisect();case 2:return this.rotate(),this.bisect();case 3:return[];default:throw new Error("next_step: index out of range")}},e}(u);window.onload=function(){return t=this,e=void 0,r=function(){var t,e,n,r,i,p,s,a,u,h;return function(t,e){var n,r,o,i,p={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(p=0)),p;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return p.label++,{value:s[1],done:!1};case 5:p.label++,r=s[1],s=[0];continue;case 7:s=p.ops.pop(),p.trys.pop();continue;default:if(!((o=(o=p.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){p=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){p.label=s[1];break}if(6===s[0]&&p.label<o[1]){p.label=o[1],o=s;break}if(o&&p.label<o[2]){p.label=o[2],p.ops.push(s);break}o[2]&&p.ops.pop(),p.trys.pop();continue}s=e.call(t,p)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(l){for(t=Math.min(window.innerHeight,window.innerWidth),console.log("pixel size:",t),e=new o.E9({x:0,y:t}),n=new o.E9({x:t,y:t}),r=new o.E9({x:t,y:0}),i=new o.E9({x:0,y:0}),p=new c(e,n,r,i),s=new URLSearchParams(window.location.search),(a=Number(s.get("depth")))||(a=3),(u=Number(s.get("stroke")))||(u=3),h=p.fractalize(a,t,u),console.log("num_shapes",h);h<2;)document.body.removeChild(document.body.children[0]),h=p.fractalize(a,t,u),console.log("num_shapes",h);return[2]}))},new((n=void 0)||(n=Promise))((function(o,i){function p(t){try{a(r.next(t))}catch(t){i(t)}}function s(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(p,s)}a((r=r.apply(t,e||[])).next())}));var t,e,n,r}}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var i=n[t]={exports:{}};return e[t](i,i.exports,r),i.exports}r.m=e,t=[],r.O=(e,n,o,i)=>{if(!n){var p=1/0;for(c=0;c<t.length;c++){for(var[n,o,i]=t[c],s=!0,a=0;a<n.length;a++)(!1&i||p>=i)&&Object.keys(r.O).every((t=>r.O[t](n[a])))?n.splice(a--,1):(s=!1,i<p&&(p=i));if(s){t.splice(c--,1);var u=o();void 0!==u&&(e=u)}}return e}i=i||0;for(var c=t.length;c>0&&t[c-1][2]>i;c--)t[c]=t[c-1];t[c]=[n,o,i]},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={179:0};r.O.j=e=>0===t[e];var e=(e,n)=>{var o,i,[p,s,a]=n,u=0;if(p.some((e=>0!==t[e]))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(a)var c=a(r)}for(e&&e(n);u<p.length;u++)i=p[u],r.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return r.O(c)},n=self.webpackChunksquare_fractal=self.webpackChunksquare_fractal||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var o=r.O(void 0,[500],(()=>r(417)));o=r.O(o)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi00MDM5NjY1MmEwMzU3OGYxMjFkNC1idW5kbGUuanMiLCJtYXBwaW5ncyI6InVCQUFJQSxFLG1lQ3lCSixTQUFTQyxFQUFTQyxFQUFXQyxHQUMzQixPQUFPLElBQUksS0FBTSxDQUNmQyxHQUFJRixFQUFHRSxFQUFJRCxFQUFHQyxHQUFLLEVBQ25CQyxHQUFJSCxFQUFHRyxFQUFJRixFQUFHRSxHQUFLLEdBRXZCLENBRUEsOEJBNkNBLFFBcENFLFlBQUFDLGtCQUFBLFdBQ0UsT0FBTyxJQUFJLEtBQVdDLEtBQUtDLFNBQVNDLFNBQVEsU0FBQ0MsR0FBUSxNQUFPLENBQUNBLEVBQUdOLEVBQUdNLEVBQUdMLEVBQUUsSUFDMUUsRUFHQSxZQUFBTSxXQUFBLFNBQ0VDLEVBQ0FDLEVBQ0FDLEdBR0EsSUFBSUMsR0FBTyxVQUFNQyxNQUFNLFFBQVFDLEtBQUtKLEVBQVlBLEdBQ2hERSxFQUFLRyxTQUFTWCxLQUFLRCxxQkFBcUJhLEtBQUssUUFBUUMsT0FBTyxDQUFFQyxNQUFPLE9BQVFDLE1BQU9SLElBS3BGLElBRkEsSUFBSVMsRUFBaUIsRUFDakJDLEVBQXVDLENBQUMsQ0FBQ2pCLEtBQU0sSSxhQUU3QyxNQUFpQ2lCLEVBQWtCQyxNQUFsREMsRUFBYSxLQUFFQyxFQUFhLEtBSWpDLEdBSEFKLElBQ0FSLEVBQUtHLFNBQVNRLEVBQWNwQixxQkFBcUJhLEtBQUssUUFBUUMsT0FBTyxDQUFFQyxNQUFPLE9BQVFDLE1BQU9SLElBRXpGYSxHQUFpQmYsRUFBVyxDQUM5QixJQUFJZ0IsRUFBa0JDLE9BQU9DLGdCQUFnQixJQUFJQyxZQUFZLElBQUksR0FBRyxXQUFHLElBQ25FQyxFQUFNTixFQUFjTyxlQUNwQkMsRUFBa0JDLEtBQUtDLE1BQU1SLEVBQWtCSSxHQUNuRFIsRUFBa0JhLEtBQUksTUFBdEJiLEVBQTBCRSxFQUFjWSxVQUFVSixHQUFpQkssS0FBSSxTQUFDbkMsR0FFdEUsTUFEMkIsQ0FBQ0EsRUFBR3VCLEVBQWdCLEVBRWpELElBQ0YsQyxFQWJLSCxFQUFrQmdCLFEsSUFnQnpCLE9BQU9qQixDQUNULEVBRUYsRUE3Q0EsR0FnREEsY0FLRSxXQUFZa0IsRUFBWUMsRUFBWUMsR0FDbEMsUUFBSyxZQUFFLEssT0FDUCxFQUFLRixJQUFNQSxFQUNYLEVBQUtDLElBQU1BLEVBQ1gsRUFBS0MsSUFBTUEsRSxDQUNiLENBc0dGLE9BaEh1QixPQVlyQixZQUFBbkMsT0FBQSxXQUNFLE1BQU8sQ0FBQ0QsS0FBS2tDLElBQUtsQyxLQUFLbUMsSUFBS25DLEtBQUtvQyxJQUNuQyxFQUVBLFlBQUFDLE9BQUEsV0FDRSxJQUFJQyxFQUFTLENBQUN0QyxLQUFLa0MsSUFBS2xDLEtBQUttQyxJQUFLbkMsS0FBS29DLEtBQ3RDcEMsS0FBS21DLElBQTJCRyxFQUFNLEdBQTVCdEMsS0FBS29DLElBQWlCRSxFQUFNLEdBQWxCdEMsS0FBS2tDLElBQU9JLEVBQU0sRUFDekMsRUFlQSxZQUFBQyxRQUFBLFdBQ0UsSUFBSUwsRUFBTWxDLEtBQUtrQyxJQUNYQyxFQUFNbkMsS0FBS21DLElBQ1hDLEVBQU1wQyxLQUFLb0MsSUFFWEksRUFBTzlDLEVBQVN3QyxFQUFLQyxHQUNyQk0sRUFBTy9DLEVBQVN5QyxFQUFLQyxHQUNyQk0sRUFBT2hELEVBQVMwQyxFQUFLRixHQU96QixNQUFPLENBTFUsSUFBSVMsRUFBU1QsRUFBS00sRUFBTUUsR0FDeEIsSUFBSUMsRUFBU0gsRUFBTUwsRUFBS00sR0FDeEIsSUFBSUUsRUFBU0QsRUFBTUQsRUFBTUwsR0FDekIsSUFBSU8sRUFBU0gsRUFBTUMsRUFBTUMsR0FPNUMsRUFlQSxZQUFBRSxRQUFBLFdBQ0UsSUFBSVYsRUFBTWxDLEtBQUtrQyxJQUNYQyxFQUFNbkMsS0FBS21DLElBQ1hDLEVBQU1wQyxLQUFLb0MsSUFFWEksRUFBTzlDLEVBQVN3QyxFQUFLQyxHQUNyQk0sRUFBTy9DLEVBQVN5QyxFQUFLQyxHQUNyQk0sRUFBT2hELEVBQVMwQyxFQUFLRixHQUNyQlcsRUFBUW5ELEVBQVM4QyxFQUFNRSxHQU0zQixNQUFPLENBSlUsSUFBSUMsRUFBU1QsRUFBS00sRUFBTUUsR0FDbkIsSUFBSUksRUFBY0QsRUFBT0wsRUFBTUwsRUFBS00sR0FDcEMsSUFBSUssRUFBY0osRUFBTUcsRUFBT0osRUFBTUwsR0FNN0QsRUFFQSxZQUFBVixhQUFBLFdBQ0UsT0FBTyxDQUNULEVBRUEsWUFBQUssVUFBQSxTQUFVZ0IsR0FDUixPQUFRQSxHQUNOLEtBQUssRUFDSCxPQUFPL0MsS0FBS3VDLFVBQ2QsS0FBSyxFQUNILE9BQU92QyxLQUFLNEMsVUFDZCxLQUFLLEVBRUgsT0FEQTVDLEtBQUtxQyxTQUNFckMsS0FBSzRDLFVBQ2QsS0FBSyxFQUdILE9BRkE1QyxLQUFLcUMsU0FDTHJDLEtBQUtxQyxTQUNFckMsS0FBSzRDLFVBQ2QsS0FBSyxFQUNILE1BQU8sR0FDVCxRQUNFLE1BQU0sSUFBSUksTUFBTSxpQ0FFdEIsRUFFRixFQWhIQSxDQUF1QkMsR0FtSHZCLGNBTUUsV0FBWWYsRUFBWUMsRUFBWUMsRUFBWWMsR0FDOUMsUUFBSyxZQUFFLEssT0FDUCxFQUFLaEIsSUFBTUEsRUFDWCxFQUFLQyxJQUFNQSxFQUNYLEVBQUtDLElBQU1BLEVBQ1gsRUFBS2MsSUFBTUEsRSxDQUNiLENBd0JGLE9BcEM0QixPQWMxQixZQUFBakQsT0FBQSxXQUNFLE1BQU8sQ0FBQ0QsS0FBS2tDLElBQUtsQyxLQUFLbUMsSUFBS25DLEtBQUtvQyxJQUFLcEMsS0FBS2tELElBQzdDLEVBRUEsWUFBQWIsT0FBQSxXQUNFLElBQUlDLEVBQVMsQ0FBQ3RDLEtBQUtrQyxJQUFLbEMsS0FBS21DLElBQUtuQyxLQUFLb0MsSUFBS3BDLEtBQUtrRCxLQUNoRGxELEtBQUttQyxJQUFxQ0csRUFBTSxHQUF0Q3RDLEtBQUtvQyxJQUEyQkUsRUFBTSxHQUE1QnRDLEtBQUtrRCxJQUFpQlosRUFBTSxHQUFsQnRDLEtBQUtrQyxJQUFPSSxFQUFNLEVBQ25ELEVBRUEsWUFBQVosYUFBQSxXQUNFLE9BQU8sQ0FDVCxFQUVBLFlBQUFLLFVBQUEsU0FBVWdCLEdBQ1IsR0FDTyxJQURDQSxFQUVKLE1BQU8sR0FFUCxNQUFNLElBQUlDLE1BQU0sZ0NBRXRCLEVBRUYsRUFwQ0EsQ0FBNEJDLEdBdUM1QiwyQiw4Q0FpR0EsUUFqR3FCLE9Bb0JuQixZQUFBRSxTQUFBLFdBQ0UsSUFBSWpCLEVBQU1sQyxLQUFLa0MsSUFDWEMsRUFBTW5DLEtBQUttQyxJQUNYQyxFQUFNcEMsS0FBS29DLElBQ1hjLEVBQU1sRCxLQUFLa0QsSUFFWFYsRUFBTzlDLEVBQVNNLEtBQUtrQyxJQUFLbEMsS0FBS21DLEtBQy9CTSxFQUFPL0MsRUFBU00sS0FBS21DLElBQUtuQyxLQUFLb0MsS0FDL0JnQixFQUFPMUQsRUFBU00sS0FBS29DLElBQUtwQyxLQUFLa0QsS0FDL0JHLEVBQU8zRCxFQUFTTSxLQUFLa0QsSUFBS2xELEtBQUtrQyxLQVFuQyxNQUFPLENBTlUsSUFBSVMsRUFBU1QsRUFBS00sRUFBTWEsR0FDeEIsSUFBSVYsRUFBU0gsRUFBTUwsRUFBS00sR0FDeEIsSUFBSUUsRUFBU0YsRUFBTUwsRUFBS2dCLEdBQ3hCLElBQUlULEVBQVNVLEVBQU1ELEVBQU1GLEdBQzNCLElBQUlJLEVBQU9kLEVBQU1DLEVBQU1XLEVBQU1DLEdBUTlDLEVBb0JBLFlBQUFFLE9BQUEsV0FDRSxJQUFJckIsRUFBTWxDLEtBQUtrQyxJQUNYQyxFQUFNbkMsS0FBS21DLElBQ1hDLEVBQU1wQyxLQUFLb0MsSUFDWGMsRUFBTWxELEtBQUtrRCxJQUtmLE1BQU8sQ0FIVSxJQUFJUCxFQUFTVCxFQUFLQyxFQUFLQyxHQUN2QixJQUFJTyxFQUFTVCxFQUFLRSxFQUFLYyxHQUsxQyxFQUVBLFlBQUF4QixhQUFBLFdBQ0UsT0FBTyxDQUNULEVBRUEsWUFBQUssVUFBQSxTQUFVZ0IsR0FDUixPQUFRQSxHQUNOLEtBQUssRUFDSCxPQUFPL0MsS0FBS21ELFdBQ2QsS0FBSyxFQUNILE9BQU9uRCxLQUFLdUQsU0FDZCxLQUFLLEVBRUgsT0FEQXZELEtBQUtxQyxTQUNFckMsS0FBS3VELFNBQ2QsS0FBSyxFQUNILE1BQU8sR0FDVCxRQUNFLE1BQU0sSUFBSVAsTUFBTSxpQ0FFdEIsRUFFRixFQWpHQSxDQUFxQkYsR0FzSXJCVSxPQUFPQyxPQWxDUCxXLCtvQ0FzQkUsSUFyQkluRCxFQUFhc0IsS0FBSzhCLElBQUlGLE9BQU9HLFlBQWFILE9BQU9JLFlBQ3JEQyxRQUFRQyxJQUFJLGNBQWV4RCxHQUVyQjRCLEVBQU0sSUFBSSxLQUFNLENBQUNyQyxFQUFHLEVBQUdDLEVBQUdRLElBQzFCNkIsRUFBTSxJQUFJLEtBQU0sQ0FBQ3RDLEVBQUdTLEVBQVlSLEVBQUdRLElBQ25DOEIsRUFBTSxJQUFJLEtBQU0sQ0FBQ3ZDLEVBQUdTLEVBQVlSLEVBQUcsSUFDbkNvRCxFQUFNLElBQUksS0FBTSxDQUFDckQsRUFBRyxFQUFHQyxFQUFHLElBQzFCaUUsRUFBZSxJQUFJVCxFQUFPcEIsRUFBS0MsRUFBS0MsRUFBS2MsR0FFekNjLEVBQWEsSUFBSUMsZ0JBQWdCVCxPQUFPVSxTQUFTQyxTQUNuRDlELEVBQVkrRCxPQUFPSixFQUFXSyxJQUFJLGFBRXBDaEUsRUFBWSxJQUVWRSxFQUFlNkQsT0FBT0osRUFBV0ssSUFBSSxjQUV2QzlELEVBQWUsR0FHYitELEVBQWFQLEVBQWEzRCxXQUFXQyxFQUFXQyxFQUFZQyxHQUNoRXNELFFBQVFDLElBQUksYUFBY1EsR0FDbkJBLEVBQWEsR0FFbEJDLFNBQVNDLEtBQUtDLFlBQVlGLFNBQVNDLEtBQUtFLFNBQVMsSUFHakRKLEVBQWFQLEVBQWEzRCxXQUFXQyxFQUFXQyxFQUFZQyxHQUM1RHNELFFBQVFDLElBQUksYUFBY1EsRyxnVEN6VzFCSyxFQUEyQixDQUFDLEVBR2hDLFNBQVNDLEVBQW9CQyxHQUU1QixJQUFJQyxFQUFlSCxFQUF5QkUsR0FDNUMsUUFBcUJFLElBQWpCRCxFQUNILE9BQU9BLEVBQWFFLFFBR3JCLElBQUlDLEVBQVNOLEVBQXlCRSxHQUFZLENBR2pERyxRQUFTLENBQUMsR0FPWCxPQUhBRSxFQUFvQkwsR0FBVUksRUFBUUEsRUFBT0QsUUFBU0osR0FHL0NLLEVBQU9ELE9BQ2YsQ0FHQUosRUFBb0JPLEVBQUlELEVGekJwQnpGLEVBQVcsR0FDZm1GLEVBQW9CUSxFQUFJLENBQUNDLEVBQVFDLEVBQVVDLEVBQUlDLEtBQzlDLElBQUdGLEVBQUgsQ0FNQSxJQUFJRyxFQUFlQyxJQUNuQixJQUFTQyxFQUFJLEVBQUdBLEVBQUlsRyxFQUFTd0MsT0FBUTBELElBQUssQ0FHekMsSUFGQSxJQUFLTCxFQUFVQyxFQUFJQyxHQUFZL0YsRUFBU2tHLEdBQ3BDQyxHQUFZLEVBQ1BDLEVBQUksRUFBR0EsRUFBSVAsRUFBU3JELE9BQVE0RCxNQUNwQixFQUFYTCxHQUFzQkMsR0FBZ0JELElBQWFNLE9BQU9DLEtBQUtuQixFQUFvQlEsR0FBR1ksT0FBT0MsR0FBU3JCLEVBQW9CUSxFQUFFYSxHQUFLWCxFQUFTTyxNQUM5SVAsRUFBU1ksT0FBT0wsSUFBSyxJQUVyQkQsR0FBWSxFQUNUSixFQUFXQyxJQUFjQSxFQUFlRCxJQUc3QyxHQUFHSSxFQUFXLENBQ2JuRyxFQUFTeUcsT0FBT1AsSUFBSyxHQUNyQixJQUFJUSxFQUFJWixTQUNFUixJQUFOb0IsSUFBaUJkLEVBQVNjLEVBQy9CLENBQ0QsQ0FDQSxPQUFPZCxDQW5CUCxDQUpDRyxFQUFXQSxHQUFZLEVBQ3ZCLElBQUksSUFBSUcsRUFBSWxHLEVBQVN3QyxPQUFRMEQsRUFBSSxHQUFLbEcsRUFBU2tHLEVBQUksR0FBRyxHQUFLSCxFQUFVRyxJQUFLbEcsRUFBU2tHLEdBQUtsRyxFQUFTa0csRUFBSSxHQUNyR2xHLEVBQVNrRyxHQUFLLENBQUNMLEVBQVVDLEVBQUlDLEVBcUJqQixFR3pCZFosRUFBb0J3QixFQUFJLENBQUNwQixFQUFTcUIsS0FDakMsSUFBSSxJQUFJSixLQUFPSSxFQUNYekIsRUFBb0IwQixFQUFFRCxFQUFZSixLQUFTckIsRUFBb0IwQixFQUFFdEIsRUFBU2lCLElBQzVFSCxPQUFPUyxlQUFldkIsRUFBU2lCLEVBQUssQ0FBRU8sWUFBWSxFQUFNbkMsSUFBS2dDLEVBQVdKLElBRTFFLEVDTkRyQixFQUFvQjBCLEVBQUksQ0FBQ0csRUFBS0MsSUFBVVosT0FBT2EsVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsRyxNQ0tsRixJQUFJSSxFQUFrQixDQUNyQixJQUFLLEdBYU5sQyxFQUFvQlEsRUFBRVMsRUFBS2tCLEdBQTBDLElBQTdCRCxFQUFnQkMsR0FHeEQsSUFBSUMsRUFBdUIsQ0FBQ0MsRUFBNEJDLEtBQ3ZELElBR0lyQyxFQUFVa0MsR0FIVHpCLEVBQVU2QixFQUFhQyxHQUFXRixFQUdoQnZCLEVBQUksRUFDM0IsR0FBR0wsRUFBUytCLE1BQU1DLEdBQWdDLElBQXhCUixFQUFnQlEsS0FBYSxDQUN0RCxJQUFJekMsS0FBWXNDLEVBQ1p2QyxFQUFvQjBCLEVBQUVhLEVBQWF0QyxLQUNyQ0QsRUFBb0JPLEVBQUVOLEdBQVlzQyxFQUFZdEMsSUFHaEQsR0FBR3VDLEVBQVMsSUFBSS9CLEVBQVMrQixFQUFReEMsRUFDbEMsQ0FFQSxJQURHcUMsR0FBNEJBLEVBQTJCQyxHQUNyRHZCLEVBQUlMLEVBQVNyRCxPQUFRMEQsSUFDekJvQixFQUFVekIsRUFBU0ssR0FDaEJmLEVBQW9CMEIsRUFBRVEsRUFBaUJDLElBQVlELEVBQWdCQyxJQUNyRUQsRUFBZ0JDLEdBQVMsS0FFMUJELEVBQWdCQyxHQUFXLEVBRTVCLE9BQU9uQyxFQUFvQlEsRUFBRUMsRUFBTyxFQUdqQ2tDLEVBQXFCQyxLQUFpQywyQkFBSUEsS0FBaUMsNEJBQUssR0FDcEdELEVBQW1CRSxRQUFRVCxFQUFxQlUsS0FBSyxLQUFNLElBQzNESCxFQUFtQnpGLEtBQU9rRixFQUFxQlUsS0FBSyxLQUFNSCxFQUFtQnpGLEtBQUs0RixLQUFLSCxHLEtDN0N2RixJQUFJSSxFQUFzQi9DLEVBQW9CUSxPQUFFTCxFQUFXLENBQUMsTUFBTSxJQUFPSCxFQUFvQixPQUM3RitDLEVBQXNCL0MsRUFBb0JRLEVBQUV1QyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3F1YXJlLWZyYWN0YWwvd2VicGFjay9ydW50aW1lL2NodW5rIGxvYWRlZCIsIndlYnBhY2s6Ly9zcXVhcmUtZnJhY3RhbC8uL2ZyYWN0YWwudHMiLCJ3ZWJwYWNrOi8vc3F1YXJlLWZyYWN0YWwvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vc3F1YXJlLWZyYWN0YWwvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3NxdWFyZS1mcmFjdGFsL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vc3F1YXJlLWZyYWN0YWwvd2VicGFjay9ydW50aW1lL2pzb25wIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8vc3F1YXJlLWZyYWN0YWwvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBkZWZlcnJlZCA9IFtdO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5PID0gKHJlc3VsdCwgY2h1bmtJZHMsIGZuLCBwcmlvcml0eSkgPT4ge1xuXHRpZihjaHVua0lkcykge1xuXHRcdHByaW9yaXR5ID0gcHJpb3JpdHkgfHwgMDtcblx0XHRmb3IodmFyIGkgPSBkZWZlcnJlZC5sZW5ndGg7IGkgPiAwICYmIGRlZmVycmVkW2kgLSAxXVsyXSA+IHByaW9yaXR5OyBpLS0pIGRlZmVycmVkW2ldID0gZGVmZXJyZWRbaSAtIDFdO1xuXHRcdGRlZmVycmVkW2ldID0gW2NodW5rSWRzLCBmbiwgcHJpb3JpdHldO1xuXHRcdHJldHVybjtcblx0fVxuXHR2YXIgbm90RnVsZmlsbGVkID0gSW5maW5pdHk7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgZGVmZXJyZWQubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgW2NodW5rSWRzLCBmbiwgcHJpb3JpdHldID0gZGVmZXJyZWRbaV07XG5cdFx0dmFyIGZ1bGZpbGxlZCA9IHRydWU7XG5cdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBjaHVua0lkcy5sZW5ndGg7IGorKykge1xuXHRcdFx0aWYgKChwcmlvcml0eSAmIDEgPT09IDAgfHwgbm90RnVsZmlsbGVkID49IHByaW9yaXR5KSAmJiBPYmplY3Qua2V5cyhfX3dlYnBhY2tfcmVxdWlyZV9fLk8pLmV2ZXJ5KChrZXkpID0+IChfX3dlYnBhY2tfcmVxdWlyZV9fLk9ba2V5XShjaHVua0lkc1tqXSkpKSkge1xuXHRcdFx0XHRjaHVua0lkcy5zcGxpY2Uoai0tLCAxKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZ1bGZpbGxlZCA9IGZhbHNlO1xuXHRcdFx0XHRpZihwcmlvcml0eSA8IG5vdEZ1bGZpbGxlZCkgbm90RnVsZmlsbGVkID0gcHJpb3JpdHk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKGZ1bGZpbGxlZCkge1xuXHRcdFx0ZGVmZXJyZWQuc3BsaWNlKGktLSwgMSlcblx0XHRcdHZhciByID0gZm4oKTtcblx0XHRcdGlmIChyICE9PSB1bmRlZmluZWQpIHJlc3VsdCA9IHI7XG5cdFx0fVxuXHR9XG5cdHJldHVybiByZXN1bHQ7XG59OyIsImltcG9ydCB7IFNWRywgUG9pbnQsIFBvaW50QXJyYXkgfSBmcm9tICdAc3ZnZG90anMvc3ZnLmpzJ1xuXG4vLyBzcXVhcmUgZnJhY3RhbDpcbi8vIC0gc3RhcnQgd2l0aCBhIHNxdWFyZVxuLy8gLSBlYWNoIHNoYXBlIGNhbiBiZTpcbi8vICAgKyBzcXVhcmVcbi8vICAgICAqIHNxdWFyZSBpbnNpZGVcbi8vICAgICAqIHNwbGl0IGludG8gdHdvIHRyaWFuZ2xlcyB0d28gd2F5c1xuLy8gICAgICogbGVhdmUgZW1wdHlcbi8vICAgKyB0cmlhbmdsZVxuLy8gICAgICogdHJpYW5nbGUgaW5zaWRlXG4vLyAgICAgKiBzcGxpdCBpbnRvIFwiVFwiOiB0cmlhbmdsZSBhbmQgdHdvIH5yaG9tYnVzJ1xuLy8gICArIHJob21idXNcbi8vICAgICAqIGxlYXZlIGVtcHR5XG4vL1xuLy8gc28gd2UgZWl0aGVyOlxuLy8gICAxLiB0YWtlIHRoZSBpbnB1dCAoTikgYXMgYSBtaXhlZC1iYXNlIHNlZWRcbi8vICAgMi4gcGljayByYW5kb21seSBlYWNoIHN0ZXBcbi8vXG4vLyB0d28gbGlzdHM6XG4vLyAtIG5vbi1kb25lIHF1ZXVlICh0cmlhbmdsZSB8IHNxdWFyZSlcbi8vIC0gZG9uZSBxdWV1ZSAodHJpYW5nbGUgfCBzcXVhcmUgfCB+cmhvbWJ1cylcbi8vXG4vLyBmaW5hbGx5LCByZW5kZXIgdHJpYW5nbGV8c3F1YXJlfHJob21idXMgLT4gU1ZHXG5cbmZ1bmN0aW9uIG1pZHBvaW50KHhzOiBQb2ludCwgeXM6IFBvaW50KTogUG9pbnQge1xuICByZXR1cm4gbmV3IFBvaW50KHtcbiAgICB4OiAoeHMueCArIHlzLngpIC8gMixcbiAgICB5OiAoeHMueSArIHlzLnkpIC8gMixcbiAgfSlcbn1cblxuYWJzdHJhY3QgY2xhc3MgU2hhcGUge1xuICBhYnN0cmFjdCByZW5kZXIoKTogUG9pbnRbXTtcblxuICBhYnN0cmFjdCByb3RhdGUoKTogdm9pZDtcblxuICBhYnN0cmFjdCBzdGVwX29wdGlvbnMoKTogbnVtYmVyO1xuXG4gIGFic3RyYWN0IG5leHRfc3RlcChpbmRleDogbnVtYmVyKTogU2hhcGVbXTtcblxuICByZW5kZXJfcG9pbnRhcnJheSgpOiBQb2ludEFycmF5IHtcbiAgICByZXR1cm4gbmV3IFBvaW50QXJyYXkodGhpcy5yZW5kZXIoKS5mbGF0TWFwKChwdCkgPT4ge3JldHVybiBbcHQueCwgcHQueV19KSk7XG4gIH1cblxuICAvLyByZXR1cm5zIHRoZSBudW1iZXIgb2Ygc3ViLXNoYXBlcyBkcmF3blxuICBmcmFjdGFsaXplKFxuICAgIG1heF9kZXB0aDogbnVtYmVyLFxuICAgIHBpeGVsX3NpemU6IG51bWJlcixcbiAgICBzdHJva2Vfd2lkdGg6IG51bWJlclxuICAgIC8vIGJvcmRlcl9waXhlbHM6IG51bWJlciwgLy8gVE9ETyA/XG4gICk6IG51bWJlciB7XG4gICAgdmFyIGRyYXcgPSBTVkcoKS5hZGRUbygnYm9keScpLnNpemUocGl4ZWxfc2l6ZSwgcGl4ZWxfc2l6ZSk7XG4gICAgZHJhdy5wb2x5bGluZSh0aGlzLnJlbmRlcl9wb2ludGFycmF5KCkpLmZpbGwoJ25vbmUnKS5zdHJva2UoeyBjb2xvcjogJyMwMDAnLCB3aWR0aDogc3Ryb2tlX3dpZHRoIH0pO1xuXG4gICAgLy8gW3NoYXBlLCBkZXB0aF1cbiAgICB2YXIgbnVtX3N1Yl9zaGFwZXMgPSAwO1xuICAgIHZhciB1bmZpbmlzaGVkX3NoYXBlczogW1NoYXBlLCBudW1iZXJdW10gPSBbW3RoaXMsIDBdXTtcbiAgICB3aGlsZSAodW5maW5pc2hlZF9zaGFwZXMubGVuZ3RoKSB7XG4gICAgICBsZXQgW2N1cnJlbnRfc2hhcGUsIGN1cnJlbnRfZGVwdGhdID0gdW5maW5pc2hlZF9zaGFwZXMucG9wKCk7XG4gICAgICBudW1fc3ViX3NoYXBlcysrO1xuICAgICAgZHJhdy5wb2x5bGluZShjdXJyZW50X3NoYXBlLnJlbmRlcl9wb2ludGFycmF5KCkpLmZpbGwoJ25vbmUnKS5zdHJva2UoeyBjb2xvcjogJyMwMDAnLCB3aWR0aDogc3Ryb2tlX3dpZHRoIH0pO1xuXG4gICAgICBpZiAoY3VycmVudF9kZXB0aCA8PSBtYXhfZGVwdGgpIHtcbiAgICAgICAgbGV0IG5leHRfcmFuZG9tX251bSA9IGNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQzMkFycmF5KDEpKVswXS8yKiozMjtcbiAgICAgICAgbGV0IG1heCA9IGN1cnJlbnRfc2hhcGUuc3RlcF9vcHRpb25zKCk7XG4gICAgICAgIGxldCBuZXh0X3N0ZXBfaW5kZXggPSBNYXRoLmZsb29yKG5leHRfcmFuZG9tX251bSAqIG1heCk7XG4gICAgICAgIHVuZmluaXNoZWRfc2hhcGVzLnB1c2goLi4uY3VycmVudF9zaGFwZS5uZXh0X3N0ZXAobmV4dF9zdGVwX2luZGV4KS5tYXAoKHgpID0+IHtcbiAgICAgICAgICBsZXQgcmV0OiBbU2hhcGUsIG51bWJlcl0gPSBbeCwgY3VycmVudF9kZXB0aCArIDFdO1xuICAgICAgICAgIHJldHVybiByZXRcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudW1fc3ViX3NoYXBlc1xuICB9XG5cbn1cblxuXG5jbGFzcyBUcmlhbmdsZSBleHRlbmRzIFNoYXBlIHtcbiAgcHQwOiBQb2ludDtcbiAgcHQxOiBQb2ludDtcbiAgcHQyOiBQb2ludDtcblxuICBjb25zdHJ1Y3RvcihwdDA6IFBvaW50LCBwdDE6IFBvaW50LCBwdDI6IFBvaW50KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnB0MCA9IHB0MDtcbiAgICB0aGlzLnB0MSA9IHB0MTtcbiAgICB0aGlzLnB0MiA9IHB0MjtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gW3RoaXMucHQwLCB0aGlzLnB0MSwgdGhpcy5wdDJdXG4gIH1cblxuICByb3RhdGUoKSB7XG4gICAgbGV0IHBvaW50cyA9IFt0aGlzLnB0MCwgdGhpcy5wdDEsIHRoaXMucHQyXTtcbiAgICBbdGhpcy5wdDEsIHRoaXMucHQyLCB0aGlzLnB0MF0gPSBwb2ludHM7XG4gIH1cblxuICAvLyBwMFxuICAvLyB8XFxcbiAgLy8gfCBcXFxuICAvLyB8ICBcXFxuICAvLyB8ICAgXFxcbiAgLy8gfCBBICBcXFxuICAvLyB8ICAgICBcXFxuICAvLyB8PHAyMF9fXFwgPHAwMVxuICAvLyB8IFxcIE0gIC9cXFxuICAvLyB8ICBcXCAgLyAgXFxcbiAgLy8gfCBDIFxcLyBCICBcXFxuICAvLyAtLS0tLS0tLS0tLSBwMVxuICAvLyBwMiAgIHAxMlxuICB0cmlzZWN0KCk6IFtUcmlhbmdsZSwgVHJpYW5nbGUsIFRyaWFuZ2xlLCBUcmlhbmdsZV0ge1xuICAgIGxldCBwdDAgPSB0aGlzLnB0MDtcbiAgICBsZXQgcHQxID0gdGhpcy5wdDE7XG4gICAgbGV0IHB0MiA9IHRoaXMucHQyO1xuXG4gICAgbGV0IHB0MDEgPSBtaWRwb2ludChwdDAsIHB0MSk7XG4gICAgbGV0IHB0MTIgPSBtaWRwb2ludChwdDEsIHB0Mik7XG4gICAgbGV0IHB0MjAgPSBtaWRwb2ludChwdDIsIHB0MCk7XG5cbiAgICBsZXQgdHJpYW5nbGVfQSA9IG5ldyBUcmlhbmdsZShwdDAsIHB0MDEsIHB0MjApO1xuICAgIGxldCB0cmlhbmdsZV9CID0gbmV3IFRyaWFuZ2xlKHB0MDEsIHB0MSwgcHQxMik7XG4gICAgbGV0IHRyaWFuZ2xlX0MgPSBuZXcgVHJpYW5nbGUocHQyMCwgcHQxMiwgcHQyKTtcbiAgICBsZXQgdHJpYW5nbGVfTSA9IG5ldyBUcmlhbmdsZShwdDAxLCBwdDEyLCBwdDIwKTtcblxuICAgIHJldHVybiBbXG4gICAgICB0cmlhbmdsZV9BLFxuICAgICAgdHJpYW5nbGVfQixcbiAgICAgIHRyaWFuZ2xlX0MsXG4gICAgICB0cmlhbmdsZV9NXVxuICB9XG5cbiAgLy8gICAgIHAwXG4gIC8vICAgICB8XFxcbiAgLy8gICAgIHwgXFxcbiAgLy8gICAgIHwgIFxcXG4gIC8vICAgICB8ICAgXFxcbiAgLy8gICAgIHwgQSAgXFxcbiAgLy8gICAgIHwgICAgIFxcXG4gIC8vIHAyMD58X3AyMDFfXFwgPHAwMVxuICAvLyAgICAgfCAgIHwgICBcXFxuICAvLyAgICAgfCBDIHwgQiAgXFxcbiAgLy8gICAgIHwgICB8ICAgICBcXFxuICAvLyAgICAgLS0tLS0tLS0tLS0gcDFcbiAgLy8gcDIgICBwMTJcbiAgdF9zcGxpdCgpOiBbVHJpYW5nbGUsIFF1YWRyaWxhdGVyYWwsIFF1YWRyaWxhdGVyYWxdIHtcbiAgICBsZXQgcHQwID0gdGhpcy5wdDA7XG4gICAgbGV0IHB0MSA9IHRoaXMucHQxO1xuICAgIGxldCBwdDIgPSB0aGlzLnB0MjtcblxuICAgIGxldCBwdDAxID0gbWlkcG9pbnQocHQwLCBwdDEpO1xuICAgIGxldCBwdDEyID0gbWlkcG9pbnQocHQxLCBwdDIpO1xuICAgIGxldCBwdDIwID0gbWlkcG9pbnQocHQyLCBwdDApO1xuICAgIGxldCBwdDIwMSA9IG1pZHBvaW50KHB0MDEsIHB0MjApO1xuXG4gICAgbGV0IHRyaWFuZ2xlX0EgPSBuZXcgVHJpYW5nbGUocHQwLCBwdDAxLCBwdDIwKTtcbiAgICBsZXQgcXVhZHJpbGF0ZXJhbF9CID0gbmV3IFF1YWRyaWxhdGVyYWwocHQyMDEsIHB0MDEsIHB0MSwgcHQxMik7XG4gICAgbGV0IHF1YWRyaWxhdGVyYWxfQyA9IG5ldyBRdWFkcmlsYXRlcmFsKHB0MjAsIHB0MjAxLCBwdDEyLCBwdDIpO1xuXG4gICAgcmV0dXJuIFtcbiAgICAgIHRyaWFuZ2xlX0EsXG4gICAgICBxdWFkcmlsYXRlcmFsX0IsXG4gICAgICBxdWFkcmlsYXRlcmFsX0NdXG4gIH1cblxuICBzdGVwX29wdGlvbnMoKSB7XG4gICAgcmV0dXJuIDVcbiAgfVxuXG4gIG5leHRfc3RlcChpbmRleDogbnVtYmVyKTogU2hhcGVbXSB7XG4gICAgc3dpdGNoIChpbmRleCkge1xuICAgICAgY2FzZSAwOlxuICAgICAgICByZXR1cm4gdGhpcy50cmlzZWN0KClcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgcmV0dXJuIHRoaXMudF9zcGxpdCgpXG4gICAgICBjYXNlIDI6XG4gICAgICAgIHRoaXMucm90YXRlKCk7XG4gICAgICAgIHJldHVybiB0aGlzLnRfc3BsaXQoKVxuICAgICAgY2FzZSAzOlxuICAgICAgICB0aGlzLnJvdGF0ZSgpO1xuICAgICAgICB0aGlzLnJvdGF0ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy50X3NwbGl0KClcbiAgICAgIGNhc2UgNDpcbiAgICAgICAgcmV0dXJuIFtdXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ25leHRfc3RlcDogaW5kZXggb3V0IG9mIHJhbmdlJylcbiAgICB9XG4gIH1cblxufVxuXG5cbmNsYXNzIFF1YWRyaWxhdGVyYWwgZXh0ZW5kcyBTaGFwZSB7XG4gIHB0MDogUG9pbnQ7XG4gIHB0MTogUG9pbnQ7XG4gIHB0MjogUG9pbnQ7XG4gIHB0MzogUG9pbnQ7XG5cbiAgY29uc3RydWN0b3IocHQwOiBQb2ludCwgcHQxOiBQb2ludCwgcHQyOiBQb2ludCwgcHQzOiBQb2ludCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5wdDAgPSBwdDA7XG4gICAgdGhpcy5wdDEgPSBwdDE7XG4gICAgdGhpcy5wdDIgPSBwdDI7XG4gICAgdGhpcy5wdDMgPSBwdDM7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIFt0aGlzLnB0MCwgdGhpcy5wdDEsIHRoaXMucHQyLCB0aGlzLnB0M11cbiAgfVxuXG4gIHJvdGF0ZSgpIHtcbiAgICBsZXQgcG9pbnRzID0gW3RoaXMucHQwLCB0aGlzLnB0MSwgdGhpcy5wdDIsIHRoaXMucHQzXTtcbiAgICBbdGhpcy5wdDEsIHRoaXMucHQyLCB0aGlzLnB0MywgdGhpcy5wdDBdID0gcG9pbnRzO1xuICB9XG5cbiAgc3RlcF9vcHRpb25zKCkge1xuICAgIHJldHVybiAxXG4gIH1cblxuICBuZXh0X3N0ZXAoaW5kZXg6IG51bWJlcik6IFNoYXBlW10ge1xuICAgIHN3aXRjaCAoaW5kZXgpIHtcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgcmV0dXJuIFtdXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ25leHRfc3RlcDogaW5kZXggb3V0IG9mIHJhbmdlJylcbiAgICB9XG4gIH1cblxufVxuXG5cbmNsYXNzIFNxdWFyZSBleHRlbmRzIFF1YWRyaWxhdGVyYWwge1xuXG4gIC8vICAgICBwMCAgICAgcDAxICAgICAgcDFcbiAgLy8gICAgIF9fX19fX19fX19fX19fX19fXG4gIC8vICAgICB8ICAgICAgLyBcXCAgICAgIHxcbiAgLy8gICAgIHwgQSAgIC8gICBcXCAgQiAgfFxuICAvLyAgICAgfCAgICAvICAgICBcXCAgICB8XG4gIC8vICAgICB8ICAgLyAgICAgICBcXCAgIHxcbiAgLy8gICAgIHwgIC8gICAgICAgICBcXCAgfFxuICAvLyAgICAgfCAvICAgICAgICAgICBcXCB8XG4gIC8vIHAzMCB8LyAgICAgIE0gICAgICBcXHwgcDEyXG4gIC8vICAgICB8XFwgICAgICAgICAgICAgL3xcbiAgLy8gICAgIHwgXFwgICAgICAgICAgIC8gfFxuICAvLyAgICAgfCAgXFwgICAgICAgICAvICB8XG4gIC8vICAgICB8ICAgXFwgICAgICAgLyAgIHxcbiAgLy8gICAgIHwgICAgXFwgICAgIC8gICAgfFxuICAvLyAgICAgfCBEICAgXFwgICAvICBDICB8XG4gIC8vICAgICB8ICAgICAgXFwgLyAgICAgIHxcbiAgLy8gICAgIHwtLS0tLS0tLS0tLS0tLS18IHAyXG4gIC8vICAgICBwMyAgICAgcDIzXG4gIHF1YWRzZWN0KCk6IFtUcmlhbmdsZSwgVHJpYW5nbGUsIFRyaWFuZ2xlLCBUcmlhbmdsZSwgU3F1YXJlXSB7XG4gICAgbGV0IHB0MCA9IHRoaXMucHQwO1xuICAgIGxldCBwdDEgPSB0aGlzLnB0MTtcbiAgICBsZXQgcHQyID0gdGhpcy5wdDI7XG4gICAgbGV0IHB0MyA9IHRoaXMucHQzO1xuXG4gICAgbGV0IHB0MDEgPSBtaWRwb2ludCh0aGlzLnB0MCwgdGhpcy5wdDEpO1xuICAgIGxldCBwdDEyID0gbWlkcG9pbnQodGhpcy5wdDEsIHRoaXMucHQyKTtcbiAgICBsZXQgcHQyMyA9IG1pZHBvaW50KHRoaXMucHQyLCB0aGlzLnB0Myk7XG4gICAgbGV0IHB0MzAgPSBtaWRwb2ludCh0aGlzLnB0MywgdGhpcy5wdDApO1xuXG4gICAgbGV0IHRyaWFuZ2xlX0EgPSBuZXcgVHJpYW5nbGUocHQwLCBwdDAxLCBwdDMwKTtcbiAgICBsZXQgdHJpYW5nbGVfQiA9IG5ldyBUcmlhbmdsZShwdDAxLCBwdDEsIHB0MTIpO1xuICAgIGxldCB0cmlhbmdsZV9DID0gbmV3IFRyaWFuZ2xlKHB0MTIsIHB0MiwgcHQyMyk7XG4gICAgbGV0IHRyaWFuZ2xlX0QgPSBuZXcgVHJpYW5nbGUocHQzMCwgcHQyMywgcHQzKTtcbiAgICBsZXQgc3F1YXJlX00gPSBuZXcgU3F1YXJlKHB0MDEsIHB0MTIsIHB0MjMsIHB0MzApO1xuXG4gICAgcmV0dXJuIFtcbiAgICAgIHRyaWFuZ2xlX0EsXG4gICAgICB0cmlhbmdsZV9CLFxuICAgICAgdHJpYW5nbGVfQyxcbiAgICAgIHRyaWFuZ2xlX0QsXG4gICAgICBzcXVhcmVfTV1cbiAgfVxuXG4gIC8vIHAwICAgICAgICAgICAgICBwMVxuICAvLyBfX19fX19fX19fX19fX19fX1xuICAvLyB8XFwgICAgICAgICAgICAgIHxcbiAgLy8gfCBcXCAgICAgICAgICAgICB8XG4gIC8vIHwgIFxcICAgICAgICAgICAgfFxuICAvLyB8ICAgXFwgICAgICBBICAgIHxcbiAgLy8gfCAgICBcXCAgICAgICAgICB8XG4gIC8vIHwgICAgIFxcICAgICAgICAgfFxuICAvLyB8ICAgICAgXFwgICAgICAgIHxcbiAgLy8gfCAgICAgICBcXCAgICAgICB8XG4gIC8vIHwgICAgICAgIFxcICAgICAgfFxuICAvLyB8ICAgICAgICAgXFwgICAgIHxcbiAgLy8gfCAgICAgICAgICBcXCAgICB8XG4gIC8vIHwgICBCICAgICAgIFxcICAgfFxuICAvLyB8ICAgICAgICAgICAgXFwgIHxcbiAgLy8gfCAgICAgICAgICAgICBcXCB8XG4gIC8vIHwtLS0tLS0tLS0tLS0tLS18IHAyXG4gIC8vIHAzXG4gIGJpc2VjdCgpOiBbVHJpYW5nbGUsIFRyaWFuZ2xlXSB7XG4gICAgbGV0IHB0MCA9IHRoaXMucHQwO1xuICAgIGxldCBwdDEgPSB0aGlzLnB0MTtcbiAgICBsZXQgcHQyID0gdGhpcy5wdDI7XG4gICAgbGV0IHB0MyA9IHRoaXMucHQzO1xuXG4gICAgbGV0IHRyaWFuZ2xlX0EgPSBuZXcgVHJpYW5nbGUocHQwLCBwdDEsIHB0Mik7XG4gICAgbGV0IHRyaWFuZ2xlX0IgPSBuZXcgVHJpYW5nbGUocHQwLCBwdDIsIHB0Myk7XG5cbiAgICByZXR1cm4gW1xuICAgICAgdHJpYW5nbGVfQSxcbiAgICAgIHRyaWFuZ2xlX0JdXG4gIH1cblxuICBzdGVwX29wdGlvbnMoKSB7XG4gICAgcmV0dXJuIDRcbiAgfVxuXG4gIG5leHRfc3RlcChpbmRleDogbnVtYmVyKTogU2hhcGVbXSB7XG4gICAgc3dpdGNoIChpbmRleCkge1xuICAgICAgY2FzZSAwOlxuICAgICAgICByZXR1cm4gdGhpcy5xdWFkc2VjdCgpXG4gICAgICBjYXNlIDE6XG4gICAgICAgIHJldHVybiB0aGlzLmJpc2VjdCgpXG4gICAgICBjYXNlIDI6XG4gICAgICAgIHRoaXMucm90YXRlKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmJpc2VjdCgpXG4gICAgICBjYXNlIDM6XG4gICAgICAgIHJldHVybiBbXVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCduZXh0X3N0ZXA6IGluZGV4IG91dCBvZiByYW5nZScpXG4gICAgfVxuICB9XG5cbn1cblxuXG5hc3luYyBmdW5jdGlvbiBtYWluKCkge1xuICBsZXQgcGl4ZWxfc2l6ZSA9IE1hdGgubWluKHdpbmRvdy5pbm5lckhlaWdodCwgd2luZG93LmlubmVyV2lkdGgpO1xuICBjb25zb2xlLmxvZygncGl4ZWwgc2l6ZTonLCBwaXhlbF9zaXplKTtcblxuICBjb25zdCBwdDAgPSBuZXcgUG9pbnQoe3g6IDAsIHk6IHBpeGVsX3NpemV9KTtcbiAgY29uc3QgcHQxID0gbmV3IFBvaW50KHt4OiBwaXhlbF9zaXplLCB5OiBwaXhlbF9zaXplfSk7XG4gIGNvbnN0IHB0MiA9IG5ldyBQb2ludCh7eDogcGl4ZWxfc2l6ZSwgeTogMH0pO1xuICBjb25zdCBwdDMgPSBuZXcgUG9pbnQoe3g6IDAsIHk6IDB9KTtcbiAgY29uc3QgZnJhY3RhbF9zZWVkID0gbmV3IFNxdWFyZShwdDAsIHB0MSwgcHQyLCBwdDMpO1xuXG4gIGNvbnN0IHVybF9wYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xuICB2YXIgbWF4X2RlcHRoID0gTnVtYmVyKHVybF9wYXJhbXMuZ2V0KCdkZXB0aCcpKTtcbiAgaWYgKCFtYXhfZGVwdGgpIHtcbiAgICBtYXhfZGVwdGggPSAzXG4gIH1cbiAgdmFyIHN0cm9rZV93aWR0aCA9IE51bWJlcih1cmxfcGFyYW1zLmdldCgnc3Ryb2tlJykpO1xuICBpZiAoIXN0cm9rZV93aWR0aCkge1xuICAgIHN0cm9rZV93aWR0aCA9IDNcbiAgfVxuXG4gIHZhciBudW1fc2hhcGVzID0gZnJhY3RhbF9zZWVkLmZyYWN0YWxpemUobWF4X2RlcHRoLCBwaXhlbF9zaXplLCBzdHJva2Vfd2lkdGgpO1xuICBjb25zb2xlLmxvZygnbnVtX3NoYXBlcycsIG51bV9zaGFwZXMpO1xuICB3aGlsZSAobnVtX3NoYXBlcyA8IDIpIHtcbiAgICAvLyByZW1vdmUgcHJldmlvdXMgU1ZHXG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChkb2N1bWVudC5ib2R5LmNoaWxkcmVuWzBdKTtcblxuICAgIC8vIHJlLWdlbmVyYXRlXG4gICAgbnVtX3NoYXBlcyA9IGZyYWN0YWxfc2VlZC5mcmFjdGFsaXplKG1heF9kZXB0aCwgcGl4ZWxfc2l6ZSwgc3Ryb2tlX3dpZHRoKTtcbiAgICBjb25zb2xlLmxvZygnbnVtX3NoYXBlcycsIG51bV9zaGFwZXMpO1xuICB9XG5cbn1cblxuLy8gcnVuIG1haW4gb24gbG9hZCAoYWZ0ZXIgPGJvZHk+IGV4aXN0cy4uKVxud2luZG93Lm9ubG9hZCA9IG1haW47XG5cbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4vLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gX193ZWJwYWNrX21vZHVsZXNfXztcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIG5vIGJhc2VVUklcblxuLy8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuLy8gW3Jlc29sdmUsIHJlamVjdCwgUHJvbWlzZV0gPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHQxNzk6IDBcbn07XG5cbi8vIG5vIGNodW5rIG9uIGRlbWFuZCBsb2FkaW5nXG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbl9fd2VicGFja19yZXF1aXJlX18uTy5qID0gKGNodW5rSWQpID0+IChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPT09IDApO1xuXG4vLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbnZhciB3ZWJwYWNrSnNvbnBDYWxsYmFjayA9IChwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiwgZGF0YSkgPT4ge1xuXHR2YXIgW2NodW5rSWRzLCBtb3JlTW9kdWxlcywgcnVudGltZV0gPSBkYXRhO1xuXHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcblx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG5cdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDA7XG5cdGlmKGNodW5rSWRzLnNvbWUoKGlkKSA9PiAoaW5zdGFsbGVkQ2h1bmtzW2lkXSAhPT0gMCkpKSB7XG5cdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG5cdFx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8obW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuXHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLm1bbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihydW50aW1lKSB2YXIgcmVzdWx0ID0gcnVudGltZShfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblx0fVxuXHRpZihwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbikgcGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24oZGF0YSk7XG5cdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdWzBdKCk7XG5cdFx0fVxuXHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG5cdH1cblx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uTyhyZXN1bHQpO1xufVxuXG52YXIgY2h1bmtMb2FkaW5nR2xvYmFsID0gc2VsZltcIndlYnBhY2tDaHVua3NxdWFyZV9mcmFjdGFsXCJdID0gc2VsZltcIndlYnBhY2tDaHVua3NxdWFyZV9mcmFjdGFsXCJdIHx8IFtdO1xuY2h1bmtMb2FkaW5nR2xvYmFsLmZvckVhY2god2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCAwKSk7XG5jaHVua0xvYWRpbmdHbG9iYWwucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2guYmluZChjaHVua0xvYWRpbmdHbG9iYWwpKTsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGRlcGVuZHMgb24gb3RoZXIgbG9hZGVkIGNodW5rcyBhbmQgZXhlY3V0aW9uIG5lZWQgdG8gYmUgZGVsYXllZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8odW5kZWZpbmVkLCBbNTAwXSwgKCkgPT4gKF9fd2VicGFja19yZXF1aXJlX18oNDE3KSkpXG5fX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy5PKF9fd2VicGFja19leHBvcnRzX18pO1xuIl0sIm5hbWVzIjpbImRlZmVycmVkIiwibWlkcG9pbnQiLCJ4cyIsInlzIiwieCIsInkiLCJyZW5kZXJfcG9pbnRhcnJheSIsInRoaXMiLCJyZW5kZXIiLCJmbGF0TWFwIiwicHQiLCJmcmFjdGFsaXplIiwibWF4X2RlcHRoIiwicGl4ZWxfc2l6ZSIsInN0cm9rZV93aWR0aCIsImRyYXciLCJhZGRUbyIsInNpemUiLCJwb2x5bGluZSIsImZpbGwiLCJzdHJva2UiLCJjb2xvciIsIndpZHRoIiwibnVtX3N1Yl9zaGFwZXMiLCJ1bmZpbmlzaGVkX3NoYXBlcyIsInBvcCIsImN1cnJlbnRfc2hhcGUiLCJjdXJyZW50X2RlcHRoIiwibmV4dF9yYW5kb21fbnVtIiwiY3J5cHRvIiwiZ2V0UmFuZG9tVmFsdWVzIiwiVWludDMyQXJyYXkiLCJtYXgiLCJzdGVwX29wdGlvbnMiLCJuZXh0X3N0ZXBfaW5kZXgiLCJNYXRoIiwiZmxvb3IiLCJwdXNoIiwibmV4dF9zdGVwIiwibWFwIiwibGVuZ3RoIiwicHQwIiwicHQxIiwicHQyIiwicm90YXRlIiwicG9pbnRzIiwidHJpc2VjdCIsInB0MDEiLCJwdDEyIiwicHQyMCIsIlRyaWFuZ2xlIiwidF9zcGxpdCIsInB0MjAxIiwiUXVhZHJpbGF0ZXJhbCIsImluZGV4IiwiRXJyb3IiLCJTaGFwZSIsInB0MyIsInF1YWRzZWN0IiwicHQyMyIsInB0MzAiLCJTcXVhcmUiLCJiaXNlY3QiLCJ3aW5kb3ciLCJvbmxvYWQiLCJtaW4iLCJpbm5lckhlaWdodCIsImlubmVyV2lkdGgiLCJjb25zb2xlIiwibG9nIiwiZnJhY3RhbF9zZWVkIiwidXJsX3BhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsImxvY2F0aW9uIiwic2VhcmNoIiwiTnVtYmVyIiwiZ2V0IiwibnVtX3NoYXBlcyIsImRvY3VtZW50IiwiYm9keSIsInJlbW92ZUNoaWxkIiwiY2hpbGRyZW4iLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIm0iLCJPIiwicmVzdWx0IiwiY2h1bmtJZHMiLCJmbiIsInByaW9yaXR5Iiwibm90RnVsZmlsbGVkIiwiSW5maW5pdHkiLCJpIiwiZnVsZmlsbGVkIiwiaiIsIk9iamVjdCIsImtleXMiLCJldmVyeSIsImtleSIsInNwbGljZSIsInIiLCJkIiwiZGVmaW5pdGlvbiIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaW5zdGFsbGVkQ2h1bmtzIiwiY2h1bmtJZCIsIndlYnBhY2tKc29ucENhbGxiYWNrIiwicGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24iLCJkYXRhIiwibW9yZU1vZHVsZXMiLCJydW50aW1lIiwic29tZSIsImlkIiwiY2h1bmtMb2FkaW5nR2xvYmFsIiwic2VsZiIsImZvckVhY2giLCJiaW5kIiwiX193ZWJwYWNrX2V4cG9ydHNfXyJdLCJzb3VyY2VSb290IjoiIn0=