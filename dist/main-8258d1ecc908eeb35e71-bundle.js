(()=>{"use strict";var t,e={417:(t,e,n)=>{var r,o=n(500),i=(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function p(t,e){return new o.E9({x:(t.x+e.x)/2,y:(t.y+e.y)/2})}var s=function(){function t(){}return t.prototype.render_pointarray=function(){return new o.VC(this.render().flatMap((function(t){return[t.x,t.y]})))},t.prototype.fractalize=function(t,e,n){var r=(0,o.Wj)().addTo("body").size(e,e);r.polyline(this.render_pointarray()).fill("none").stroke({color:"#000",width:n});for(var i=0,p=[[this,0]],s=function(){var e=p.pop(),o=e[0],s=e[1];if(i++,r.polyline(o.render_pointarray()).fill("none").stroke({color:"#000",width:n}),s<=t){var a=crypto.getRandomValues(new Uint32Array(1))[0]/Math.pow(2,32),u=o.step_options(),c=Math.floor(a*u);p.push.apply(p,o.next_step(c).map((function(t){return[t,s+1]})))}};p.length;)s();return i},t}(),a=function(t){function e(e,n,r){var o=t.call(this)||this;return o.pt0=e,o.pt1=n,o.pt2=r,o}return i(e,t),e.prototype.render=function(){return[this.pt0,this.pt1,this.pt2]},e.prototype.rotate=function(){var t=[this.pt0,this.pt1,this.pt2];this.pt1=t[0],this.pt2=t[1],this.pt0=t[2]},e.prototype.trisect=function(){var t=this.pt0,n=this.pt1,r=this.pt2,o=p(t,n),i=p(n,r),s=p(r,t);return[new e(t,o,s),new e(o,n,i),new e(s,i,r),new e(o,i,s)]},e.prototype.t_split=function(){var t=this.pt0,n=this.pt1,r=this.pt2,o=p(t,n),i=p(n,r),s=p(r,t),a=p(o,s);return[new e(t,o,s),new u(a,o,n,i),new u(s,a,i,r)]},e.prototype.step_options=function(){return 5},e.prototype.next_step=function(t){switch(t){case 0:return this.trisect();case 1:return this.t_split();case 2:return this.rotate(),this.t_split();case 3:return this.rotate(),this.rotate(),this.t_split();case 4:return[];default:throw new Error("next_step: index out of range")}},e}(s),u=function(t){function e(e,n,r,o){var i=t.call(this)||this;return i.pt0=e,i.pt1=n,i.pt2=r,i.pt3=o,i}return i(e,t),e.prototype.render=function(){return[this.pt0,this.pt1,this.pt2,this.pt3]},e.prototype.rotate=function(){var t=[this.pt0,this.pt1,this.pt2,this.pt3];this.pt1=t[0],this.pt2=t[1],this.pt3=t[2],this.pt0=t[3]},e.prototype.step_options=function(){return 1},e.prototype.next_step=function(t){if(0===t)return[];throw new Error("next_step: index out of range")},e}(s),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.quadsect=function(){var t=this.pt0,n=this.pt1,r=this.pt2,o=this.pt3,i=p(this.pt0,this.pt1),s=p(this.pt1,this.pt2),u=p(this.pt2,this.pt3),c=p(this.pt3,this.pt0);return[new a(t,i,c),new a(i,n,s),new a(s,r,u),new a(c,u,o),new e(i,s,u,c)]},e.prototype.bisect=function(){var t=this.pt0,e=this.pt1,n=this.pt2,r=this.pt3;return[new a(t,e,n),new a(t,n,r)]},e.prototype.step_options=function(){return 4},e.prototype.next_step=function(t){switch(t){case 0:return this.quadsect();case 1:return this.bisect();case 2:return this.rotate(),this.bisect();case 3:return[];default:throw new Error("next_step: index out of range")}},e}(u);window.onload=function(){return t=this,e=void 0,r=function(){var t,e,n,r,i,p,s,a,u,h;return function(t,e){var n,r,o,i,p={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(p=0)),p;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return p.label++,{value:s[1],done:!1};case 5:p.label++,r=s[1],s=[0];continue;case 7:s=p.ops.pop(),p.trys.pop();continue;default:if(!((o=(o=p.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){p=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){p.label=s[1];break}if(6===s[0]&&p.label<o[1]){p.label=o[1],o=s;break}if(o&&p.label<o[2]){p.label=o[2],p.ops.push(s);break}o[2]&&p.ops.pop(),p.trys.pop();continue}s=e.call(t,p)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(l){for(t=Math.min(window.innerHeight,window.innerWidth),console.log("pixel size:",t),e=new o.E9({x:0,y:t}),n=new o.E9({x:t,y:t}),r=new o.E9({x:t,y:0}),i=new o.E9({x:0,y:0}),p=new c(e,n,r,i),s=new URLSearchParams(window.location.search),(a=Number(s.get("max_depth")))||(a=3),(u=Number(s.get("stroke_width")))||(u=3),h=p.fractalize(a,t,u),console.log("num_shapes",h);h<2;)document.body.removeChild(document.body.children[0]),h=p.fractalize(a,t,u),console.log("num_shapes",h);return[2]}))},new((n=void 0)||(n=Promise))((function(o,i){function p(t){try{a(r.next(t))}catch(t){i(t)}}function s(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(p,s)}a((r=r.apply(t,e||[])).next())}));var t,e,n,r}}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var i=n[t]={exports:{}};return e[t](i,i.exports,r),i.exports}r.m=e,t=[],r.O=(e,n,o,i)=>{if(!n){var p=1/0;for(c=0;c<t.length;c++){for(var[n,o,i]=t[c],s=!0,a=0;a<n.length;a++)(!1&i||p>=i)&&Object.keys(r.O).every((t=>r.O[t](n[a])))?n.splice(a--,1):(s=!1,i<p&&(p=i));if(s){t.splice(c--,1);var u=o();void 0!==u&&(e=u)}}return e}i=i||0;for(var c=t.length;c>0&&t[c-1][2]>i;c--)t[c]=t[c-1];t[c]=[n,o,i]},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={179:0};r.O.j=e=>0===t[e];var e=(e,n)=>{var o,i,[p,s,a]=n,u=0;if(p.some((e=>0!==t[e]))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(a)var c=a(r)}for(e&&e(n);u<p.length;u++)i=p[u],r.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return r.O(c)},n=self.webpackChunksquare_fractal=self.webpackChunksquare_fractal||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var o=r.O(void 0,[500],(()=>r(417)));o=r.O(o)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YSxVQUFVQyxlQUFlQyxLQUFLSixFQUFLQyxHLE1DS2xGLElBQUlJLEVBQWtCLENBQ3JCLElBQUssR0FhTmxDLEVBQW9CUSxFQUFFUyxFQUFLa0IsR0FBMEMsSUFBN0JELEVBQWdCQyxHQUd4RCxJQUFJQyxFQUF1QixDQUFDQyxFQUE0QkMsS0FDdkQsSUFHSXJDLEVBQVVrQyxHQUhUekIsRUFBVTZCLEVBQWFDLEdBQVdGLEVBR2hCdkIsRUFBSSxFQUMzQixHQUFHTCxFQUFTK0IsTUFBTUMsR0FBZ0MsSUFBeEJSLEVBQWdCUSxLQUFhLENBQ3RELElBQUl6QyxLQUFZc0MsRUFDWnZDLEVBQW9CMEIsRUFBRWEsRUFBYXRDLEtBQ3JDRCxFQUFvQk8sRUFBRU4sR0FBWXNDLEVBQVl0QyxJQUdoRCxHQUFHdUMsRUFBUyxJQUFJL0IsRUFBUytCLEVBQVF4QyxFQUNsQyxDQUVBLElBREdxQyxHQUE0QkEsRUFBMkJDLEdBQ3JEdkIsRUFBSUwsRUFBU3JELE9BQVEwRCxJQUN6Qm9CLEVBQVV6QixFQUFTSyxHQUNoQmYsRUFBb0IwQixFQUFFUSxFQUFpQkMsSUFBWUQsRUFBZ0JDLElBQ3JFRCxFQUFnQkMsR0FBUyxLQUUxQkQsRUFBZ0JDLEdBQVcsRUFFNUIsT0FBT25DLEVBQW9CUSxFQUFFQyxFQUFPLEVBR2pDa0MsRUFBcUJDLEtBQWlDLDJCQUFJQSxLQUFpQyw0QkFBSyxHQUNwR0QsRUFBbUJFLFFBQVFULEVBQXFCVSxLQUFLLEtBQU0sSUFDM0RILEVBQW1CekYsS0FBT2tGLEVBQXFCVSxLQUFLLEtBQU1ILEVBQW1CekYsS0FBSzRGLEtBQUtILEcsS0M3Q3ZGLElBQUlJLEVBQXNCL0MsRUFBb0JRLE9BQUVMLEVBQVcsQ0FBQyxNQUFNLElBQU9ILEVBQW9CLE9BQzdGK0MsRUFBc0IvQyxFQUFvQlEsRUFBRXVDLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zcXVhcmUtZnJhY3RhbC93ZWJwYWNrL3J1bnRpbWUvY2h1bmsgbG9hZGVkIiwid2VicGFjazovL3NxdWFyZS1mcmFjdGFsLy4vZnJhY3RhbC50cyIsIndlYnBhY2s6Ly9zcXVhcmUtZnJhY3RhbC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9zcXVhcmUtZnJhY3RhbC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vc3F1YXJlLWZyYWN0YWwvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9zcXVhcmUtZnJhY3RhbC93ZWJwYWNrL3J1bnRpbWUvanNvbnAgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly9zcXVhcmUtZnJhY3RhbC93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGRlZmVycmVkID0gW107XG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8gPSAocmVzdWx0LCBjaHVua0lkcywgZm4sIHByaW9yaXR5KSA9PiB7XG5cdGlmKGNodW5rSWRzKSB7XG5cdFx0cHJpb3JpdHkgPSBwcmlvcml0eSB8fCAwO1xuXHRcdGZvcih2YXIgaSA9IGRlZmVycmVkLmxlbmd0aDsgaSA+IDAgJiYgZGVmZXJyZWRbaSAtIDFdWzJdID4gcHJpb3JpdHk7IGktLSkgZGVmZXJyZWRbaV0gPSBkZWZlcnJlZFtpIC0gMV07XG5cdFx0ZGVmZXJyZWRbaV0gPSBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV07XG5cdFx0cmV0dXJuO1xuXHR9XG5cdHZhciBub3RGdWxmaWxsZWQgPSBJbmZpbml0eTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkZWZlcnJlZC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV0gPSBkZWZlcnJlZFtpXTtcblx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGNodW5rSWRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRpZiAoKHByaW9yaXR5ICYgMSA9PT0gMCB8fCBub3RGdWxmaWxsZWQgPj0gcHJpb3JpdHkpICYmIE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uTykuZXZlcnkoKGtleSkgPT4gKF9fd2VicGFja19yZXF1aXJlX18uT1trZXldKGNodW5rSWRzW2pdKSkpKSB7XG5cdFx0XHRcdGNodW5rSWRzLnNwbGljZShqLS0sIDEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0XHRcdGlmKHByaW9yaXR5IDwgbm90RnVsZmlsbGVkKSBub3RGdWxmaWxsZWQgPSBwcmlvcml0eTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYoZnVsZmlsbGVkKSB7XG5cdFx0XHRkZWZlcnJlZC5zcGxpY2UoaS0tLCAxKVxuXHRcdFx0dmFyIHIgPSBmbigpO1xuXHRcdFx0aWYgKHIgIT09IHVuZGVmaW5lZCkgcmVzdWx0ID0gcjtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn07IiwiaW1wb3J0IHsgU1ZHLCBQb2ludCwgUG9pbnRBcnJheSB9IGZyb20gJ0Bzdmdkb3Rqcy9zdmcuanMnXG5cbi8vIGZyYWN0YWwgc2hhcGU6XG4vLyAtIHN0YXJ0IHdpdGggYSBzcXVhcmVcbi8vIC0gZWFjaCBzaGFwZSBjYW4gYmU6XG4vLyAgICsgc3F1YXJlXG4vLyAgICAgKiBzcXVhcmUgaW5zaWRlXG4vLyAgICAgKiBzcGxpdCBpbnRvIHR3byB0cmlhbmdsZXMgdHdvIHdheXNcbi8vICAgICAqIGxlYXZlIGVtcHR5XG4vLyAgICsgdHJpYW5nbGVcbi8vICAgICAqIHRyaWFuZ2xlIGluc2lkZVxuLy8gICAgICogc3BsaXQgaW50byBcIlRcIjogdHJpYW5nbGUgYW5kIHR3byB+cmhvbWJ1cydcbi8vICAgKyByaG9tYnVzXG4vLyAgICAgKiBsZWF2ZSBlbXB0eVxuLy9cbi8vIHNvIHdlIGVpdGhlcjpcbi8vICAgMS4gdGFrZSB0aGUgaW5wdXQgKE4pIGFzIGEgbWl4ZWQtYmFzZSBzZWVkXG4vLyAgIDIuIHBpY2sgcmFuZG9tbHkgZWFjaCBzdGVwXG4vL1xuLy8gdHdvIGxpc3RzOlxuLy8gLSBub24tZG9uZSBxdWV1ZSAodHJpYW5nbGUgfCBzcXVhcmUpXG4vLyAtIGRvbmUgcXVldWUgKHRyaWFuZ2xlIHwgc3F1YXJlIHwgfnJob21idXMpXG4vL1xuLy8gZmluYWxseSwgcmVuZGVyIHRyaWFuZ2xlfHNxdWFyZXxyaG9tYnVzIC0+IFNWR1xuXG5mdW5jdGlvbiBtaWRwb2ludCh4czogUG9pbnQsIHlzOiBQb2ludCk6IFBvaW50IHtcbiAgcmV0dXJuIG5ldyBQb2ludCh7XG4gICAgeDogKHhzLnggKyB5cy54KSAvIDIsXG4gICAgeTogKHhzLnkgKyB5cy55KSAvIDIsXG4gIH0pXG59XG5cbmFic3RyYWN0IGNsYXNzIFNoYXBlIHtcbiAgYWJzdHJhY3QgcmVuZGVyKCk6IFBvaW50W107XG5cbiAgYWJzdHJhY3Qgcm90YXRlKCk6IHZvaWQ7XG5cbiAgYWJzdHJhY3Qgc3RlcF9vcHRpb25zKCk6IG51bWJlcjtcblxuICBhYnN0cmFjdCBuZXh0X3N0ZXAoaW5kZXg6IG51bWJlcik6IFNoYXBlW107XG5cbiAgcmVuZGVyX3BvaW50YXJyYXkoKTogUG9pbnRBcnJheSB7XG4gICAgcmV0dXJuIG5ldyBQb2ludEFycmF5KHRoaXMucmVuZGVyKCkuZmxhdE1hcCgocHQpID0+IHtyZXR1cm4gW3B0LngsIHB0LnldfSkpO1xuICB9XG5cbiAgLy8gcmV0dXJucyB0aGUgbnVtYmVyIG9mIHN1Yi1zaGFwZXMgZHJhd25cbiAgZnJhY3RhbGl6ZShcbiAgICBtYXhfZGVwdGg6IG51bWJlcixcbiAgICBwaXhlbF9zaXplOiBudW1iZXIsXG4gICAgc3Ryb2tlX3dpZHRoOiBudW1iZXJcbiAgICAvLyBib3JkZXJfcGl4ZWxzOiBudW1iZXIsIC8vIFRPRE8gP1xuICApOiBudW1iZXIge1xuICAgIHZhciBkcmF3ID0gU1ZHKCkuYWRkVG8oJ2JvZHknKS5zaXplKHBpeGVsX3NpemUsIHBpeGVsX3NpemUpO1xuICAgIGRyYXcucG9seWxpbmUodGhpcy5yZW5kZXJfcG9pbnRhcnJheSgpKS5maWxsKCdub25lJykuc3Ryb2tlKHsgY29sb3I6ICcjMDAwJywgd2lkdGg6IHN0cm9rZV93aWR0aCB9KTtcblxuICAgIC8vIFtzaGFwZSwgZGVwdGhdXG4gICAgdmFyIG51bV9zdWJfc2hhcGVzID0gMDtcbiAgICB2YXIgdW5maW5pc2hlZF9zaGFwZXM6IFtTaGFwZSwgbnVtYmVyXVtdID0gW1t0aGlzLCAwXV07XG4gICAgd2hpbGUgKHVuZmluaXNoZWRfc2hhcGVzLmxlbmd0aCkge1xuICAgICAgbGV0IFtjdXJyZW50X3NoYXBlLCBjdXJyZW50X2RlcHRoXSA9IHVuZmluaXNoZWRfc2hhcGVzLnBvcCgpO1xuICAgICAgbnVtX3N1Yl9zaGFwZXMrKztcbiAgICAgIGRyYXcucG9seWxpbmUoY3VycmVudF9zaGFwZS5yZW5kZXJfcG9pbnRhcnJheSgpKS5maWxsKCdub25lJykuc3Ryb2tlKHsgY29sb3I6ICcjMDAwJywgd2lkdGg6IHN0cm9rZV93aWR0aCB9KTtcblxuICAgICAgaWYgKGN1cnJlbnRfZGVwdGggPD0gbWF4X2RlcHRoKSB7XG4gICAgICAgIGxldCBuZXh0X3JhbmRvbV9udW0gPSBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50MzJBcnJheSgxKSlbMF0vMioqMzI7XG4gICAgICAgIGxldCBtYXggPSBjdXJyZW50X3NoYXBlLnN0ZXBfb3B0aW9ucygpO1xuICAgICAgICBsZXQgbmV4dF9zdGVwX2luZGV4ID0gTWF0aC5mbG9vcihuZXh0X3JhbmRvbV9udW0gKiBtYXgpO1xuICAgICAgICB1bmZpbmlzaGVkX3NoYXBlcy5wdXNoKC4uLmN1cnJlbnRfc2hhcGUubmV4dF9zdGVwKG5leHRfc3RlcF9pbmRleCkubWFwKCh4KSA9PiB7XG4gICAgICAgICAgbGV0IHJldDogW1NoYXBlLCBudW1iZXJdID0gW3gsIGN1cnJlbnRfZGVwdGggKyAxXTtcbiAgICAgICAgICByZXR1cm4gcmV0XG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVtX3N1Yl9zaGFwZXNcbiAgfVxuXG59XG5cblxuY2xhc3MgVHJpYW5nbGUgZXh0ZW5kcyBTaGFwZSB7XG4gIHB0MDogUG9pbnQ7XG4gIHB0MTogUG9pbnQ7XG4gIHB0MjogUG9pbnQ7XG5cbiAgY29uc3RydWN0b3IocHQwOiBQb2ludCwgcHQxOiBQb2ludCwgcHQyOiBQb2ludCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5wdDAgPSBwdDA7XG4gICAgdGhpcy5wdDEgPSBwdDE7XG4gICAgdGhpcy5wdDIgPSBwdDI7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIFt0aGlzLnB0MCwgdGhpcy5wdDEsIHRoaXMucHQyXVxuICB9XG5cbiAgcm90YXRlKCkge1xuICAgIGxldCBwb2ludHMgPSBbdGhpcy5wdDAsIHRoaXMucHQxLCB0aGlzLnB0Ml07XG4gICAgW3RoaXMucHQxLCB0aGlzLnB0MiwgdGhpcy5wdDBdID0gcG9pbnRzO1xuICB9XG5cbiAgLy8gcDBcbiAgLy8gfFxcXG4gIC8vIHwgXFxcbiAgLy8gfCAgXFxcbiAgLy8gfCAgIFxcXG4gIC8vIHwgQSAgXFxcbiAgLy8gfCAgICAgXFxcbiAgLy8gfDxwMjBfX1xcIDxwMDFcbiAgLy8gfCBcXCBNICAvXFxcbiAgLy8gfCAgXFwgIC8gIFxcXG4gIC8vIHwgQyBcXC8gQiAgXFxcbiAgLy8gLS0tLS0tLS0tLS0gcDFcbiAgLy8gcDIgICBwMTJcbiAgdHJpc2VjdCgpOiBbVHJpYW5nbGUsIFRyaWFuZ2xlLCBUcmlhbmdsZSwgVHJpYW5nbGVdIHtcbiAgICBsZXQgcHQwID0gdGhpcy5wdDA7XG4gICAgbGV0IHB0MSA9IHRoaXMucHQxO1xuICAgIGxldCBwdDIgPSB0aGlzLnB0MjtcblxuICAgIGxldCBwdDAxID0gbWlkcG9pbnQocHQwLCBwdDEpO1xuICAgIGxldCBwdDEyID0gbWlkcG9pbnQocHQxLCBwdDIpO1xuICAgIGxldCBwdDIwID0gbWlkcG9pbnQocHQyLCBwdDApO1xuXG4gICAgbGV0IHRyaWFuZ2xlX0EgPSBuZXcgVHJpYW5nbGUocHQwLCBwdDAxLCBwdDIwKTtcbiAgICBsZXQgdHJpYW5nbGVfQiA9IG5ldyBUcmlhbmdsZShwdDAxLCBwdDEsIHB0MTIpO1xuICAgIGxldCB0cmlhbmdsZV9DID0gbmV3IFRyaWFuZ2xlKHB0MjAsIHB0MTIsIHB0Mik7XG4gICAgbGV0IHRyaWFuZ2xlX00gPSBuZXcgVHJpYW5nbGUocHQwMSwgcHQxMiwgcHQyMCk7XG5cbiAgICByZXR1cm4gW1xuICAgICAgdHJpYW5nbGVfQSxcbiAgICAgIHRyaWFuZ2xlX0IsXG4gICAgICB0cmlhbmdsZV9DLFxuICAgICAgdHJpYW5nbGVfTV1cbiAgfVxuXG4gIC8vICAgICBwMFxuICAvLyAgICAgfFxcXG4gIC8vICAgICB8IFxcXG4gIC8vICAgICB8ICBcXFxuICAvLyAgICAgfCAgIFxcXG4gIC8vICAgICB8IEEgIFxcXG4gIC8vICAgICB8ICAgICBcXFxuICAvLyBwMjA+fF9wMjAxX1xcIDxwMDFcbiAgLy8gICAgIHwgICB8ICAgXFxcbiAgLy8gICAgIHwgQyB8IEIgIFxcXG4gIC8vICAgICB8ICAgfCAgICAgXFxcbiAgLy8gICAgIC0tLS0tLS0tLS0tIHAxXG4gIC8vIHAyICAgcDEyXG4gIHRfc3BsaXQoKTogW1RyaWFuZ2xlLCBRdWFkcmlsYXRlcmFsLCBRdWFkcmlsYXRlcmFsXSB7XG4gICAgbGV0IHB0MCA9IHRoaXMucHQwO1xuICAgIGxldCBwdDEgPSB0aGlzLnB0MTtcbiAgICBsZXQgcHQyID0gdGhpcy5wdDI7XG5cbiAgICBsZXQgcHQwMSA9IG1pZHBvaW50KHB0MCwgcHQxKTtcbiAgICBsZXQgcHQxMiA9IG1pZHBvaW50KHB0MSwgcHQyKTtcbiAgICBsZXQgcHQyMCA9IG1pZHBvaW50KHB0MiwgcHQwKTtcbiAgICBsZXQgcHQyMDEgPSBtaWRwb2ludChwdDAxLCBwdDIwKTtcblxuICAgIGxldCB0cmlhbmdsZV9BID0gbmV3IFRyaWFuZ2xlKHB0MCwgcHQwMSwgcHQyMCk7XG4gICAgbGV0IHF1YWRyaWxhdGVyYWxfQiA9IG5ldyBRdWFkcmlsYXRlcmFsKHB0MjAxLCBwdDAxLCBwdDEsIHB0MTIpO1xuICAgIGxldCBxdWFkcmlsYXRlcmFsX0MgPSBuZXcgUXVhZHJpbGF0ZXJhbChwdDIwLCBwdDIwMSwgcHQxMiwgcHQyKTtcblxuICAgIHJldHVybiBbXG4gICAgICB0cmlhbmdsZV9BLFxuICAgICAgcXVhZHJpbGF0ZXJhbF9CLFxuICAgICAgcXVhZHJpbGF0ZXJhbF9DXVxuICB9XG5cbiAgc3RlcF9vcHRpb25zKCkge1xuICAgIHJldHVybiA1XG4gIH1cblxuICBuZXh0X3N0ZXAoaW5kZXg6IG51bWJlcik6IFNoYXBlW10ge1xuICAgIHN3aXRjaCAoaW5kZXgpIHtcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgcmV0dXJuIHRoaXMudHJpc2VjdCgpXG4gICAgICBjYXNlIDE6XG4gICAgICAgIHJldHVybiB0aGlzLnRfc3BsaXQoKVxuICAgICAgY2FzZSAyOlxuICAgICAgICB0aGlzLnJvdGF0ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy50X3NwbGl0KClcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgdGhpcy5yb3RhdGUoKTtcbiAgICAgICAgdGhpcy5yb3RhdGUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudF9zcGxpdCgpXG4gICAgICBjYXNlIDQ6XG4gICAgICAgIHJldHVybiBbXVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCduZXh0X3N0ZXA6IGluZGV4IG91dCBvZiByYW5nZScpXG4gICAgfVxuICB9XG5cbn1cblxuXG5jbGFzcyBRdWFkcmlsYXRlcmFsIGV4dGVuZHMgU2hhcGUge1xuICBwdDA6IFBvaW50O1xuICBwdDE6IFBvaW50O1xuICBwdDI6IFBvaW50O1xuICBwdDM6IFBvaW50O1xuXG4gIGNvbnN0cnVjdG9yKHB0MDogUG9pbnQsIHB0MTogUG9pbnQsIHB0MjogUG9pbnQsIHB0MzogUG9pbnQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMucHQwID0gcHQwO1xuICAgIHRoaXMucHQxID0gcHQxO1xuICAgIHRoaXMucHQyID0gcHQyO1xuICAgIHRoaXMucHQzID0gcHQzO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiBbdGhpcy5wdDAsIHRoaXMucHQxLCB0aGlzLnB0MiwgdGhpcy5wdDNdXG4gIH1cblxuICByb3RhdGUoKSB7XG4gICAgbGV0IHBvaW50cyA9IFt0aGlzLnB0MCwgdGhpcy5wdDEsIHRoaXMucHQyLCB0aGlzLnB0M107XG4gICAgW3RoaXMucHQxLCB0aGlzLnB0MiwgdGhpcy5wdDMsIHRoaXMucHQwXSA9IHBvaW50cztcbiAgfVxuXG4gIHN0ZXBfb3B0aW9ucygpIHtcbiAgICByZXR1cm4gMVxuICB9XG5cbiAgbmV4dF9zdGVwKGluZGV4OiBudW1iZXIpOiBTaGFwZVtdIHtcbiAgICBzd2l0Y2ggKGluZGV4KSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIHJldHVybiBbXVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCduZXh0X3N0ZXA6IGluZGV4IG91dCBvZiByYW5nZScpXG4gICAgfVxuICB9XG5cbn1cblxuXG5jbGFzcyBTcXVhcmUgZXh0ZW5kcyBRdWFkcmlsYXRlcmFsIHtcblxuICAvLyAgICAgcDAgICAgIHAwMSAgICAgIHAxXG4gIC8vICAgICBfX19fX19fX19fX19fX19fX1xuICAvLyAgICAgfCAgICAgIC8gXFwgICAgICB8XG4gIC8vICAgICB8IEEgICAvICAgXFwgIEIgIHxcbiAgLy8gICAgIHwgICAgLyAgICAgXFwgICAgfFxuICAvLyAgICAgfCAgIC8gICAgICAgXFwgICB8XG4gIC8vICAgICB8ICAvICAgICAgICAgXFwgIHxcbiAgLy8gICAgIHwgLyAgICAgICAgICAgXFwgfFxuICAvLyBwMzAgfC8gICAgICBNICAgICAgXFx8IHAxMlxuICAvLyAgICAgfFxcICAgICAgICAgICAgIC98XG4gIC8vICAgICB8IFxcICAgICAgICAgICAvIHxcbiAgLy8gICAgIHwgIFxcICAgICAgICAgLyAgfFxuICAvLyAgICAgfCAgIFxcICAgICAgIC8gICB8XG4gIC8vICAgICB8ICAgIFxcICAgICAvICAgIHxcbiAgLy8gICAgIHwgRCAgIFxcICAgLyAgQyAgfFxuICAvLyAgICAgfCAgICAgIFxcIC8gICAgICB8XG4gIC8vICAgICB8LS0tLS0tLS0tLS0tLS0tfCBwMlxuICAvLyAgICAgcDMgICAgIHAyM1xuICBxdWFkc2VjdCgpOiBbVHJpYW5nbGUsIFRyaWFuZ2xlLCBUcmlhbmdsZSwgVHJpYW5nbGUsIFNxdWFyZV0ge1xuICAgIGxldCBwdDAgPSB0aGlzLnB0MDtcbiAgICBsZXQgcHQxID0gdGhpcy5wdDE7XG4gICAgbGV0IHB0MiA9IHRoaXMucHQyO1xuICAgIGxldCBwdDMgPSB0aGlzLnB0MztcblxuICAgIGxldCBwdDAxID0gbWlkcG9pbnQodGhpcy5wdDAsIHRoaXMucHQxKTtcbiAgICBsZXQgcHQxMiA9IG1pZHBvaW50KHRoaXMucHQxLCB0aGlzLnB0Mik7XG4gICAgbGV0IHB0MjMgPSBtaWRwb2ludCh0aGlzLnB0MiwgdGhpcy5wdDMpO1xuICAgIGxldCBwdDMwID0gbWlkcG9pbnQodGhpcy5wdDMsIHRoaXMucHQwKTtcblxuICAgIGxldCB0cmlhbmdsZV9BID0gbmV3IFRyaWFuZ2xlKHB0MCwgcHQwMSwgcHQzMCk7XG4gICAgbGV0IHRyaWFuZ2xlX0IgPSBuZXcgVHJpYW5nbGUocHQwMSwgcHQxLCBwdDEyKTtcbiAgICBsZXQgdHJpYW5nbGVfQyA9IG5ldyBUcmlhbmdsZShwdDEyLCBwdDIsIHB0MjMpO1xuICAgIGxldCB0cmlhbmdsZV9EID0gbmV3IFRyaWFuZ2xlKHB0MzAsIHB0MjMsIHB0Myk7XG4gICAgbGV0IHNxdWFyZV9NID0gbmV3IFNxdWFyZShwdDAxLCBwdDEyLCBwdDIzLCBwdDMwKTtcblxuICAgIHJldHVybiBbXG4gICAgICB0cmlhbmdsZV9BLFxuICAgICAgdHJpYW5nbGVfQixcbiAgICAgIHRyaWFuZ2xlX0MsXG4gICAgICB0cmlhbmdsZV9ELFxuICAgICAgc3F1YXJlX01dXG4gIH1cblxuICAvLyBwMCAgICAgICAgICAgICAgcDFcbiAgLy8gX19fX19fX19fX19fX19fX19cbiAgLy8gfFxcICAgICAgICAgICAgICB8XG4gIC8vIHwgXFwgICAgICAgICAgICAgfFxuICAvLyB8ICBcXCAgICAgICAgICAgIHxcbiAgLy8gfCAgIFxcICAgICAgQSAgICB8XG4gIC8vIHwgICAgXFwgICAgICAgICAgfFxuICAvLyB8ICAgICBcXCAgICAgICAgIHxcbiAgLy8gfCAgICAgIFxcICAgICAgICB8XG4gIC8vIHwgICAgICAgXFwgICAgICAgfFxuICAvLyB8ICAgICAgICBcXCAgICAgIHxcbiAgLy8gfCAgICAgICAgIFxcICAgICB8XG4gIC8vIHwgICAgICAgICAgXFwgICAgfFxuICAvLyB8ICAgQiAgICAgICBcXCAgIHxcbiAgLy8gfCAgICAgICAgICAgIFxcICB8XG4gIC8vIHwgICAgICAgICAgICAgXFwgfFxuICAvLyB8LS0tLS0tLS0tLS0tLS0tfCBwMlxuICAvLyBwM1xuICBiaXNlY3QoKTogW1RyaWFuZ2xlLCBUcmlhbmdsZV0ge1xuICAgIGxldCBwdDAgPSB0aGlzLnB0MDtcbiAgICBsZXQgcHQxID0gdGhpcy5wdDE7XG4gICAgbGV0IHB0MiA9IHRoaXMucHQyO1xuICAgIGxldCBwdDMgPSB0aGlzLnB0MztcblxuICAgIGxldCB0cmlhbmdsZV9BID0gbmV3IFRyaWFuZ2xlKHB0MCwgcHQxLCBwdDIpO1xuICAgIGxldCB0cmlhbmdsZV9CID0gbmV3IFRyaWFuZ2xlKHB0MCwgcHQyLCBwdDMpO1xuXG4gICAgcmV0dXJuIFtcbiAgICAgIHRyaWFuZ2xlX0EsXG4gICAgICB0cmlhbmdsZV9CXVxuICB9XG5cbiAgc3RlcF9vcHRpb25zKCkge1xuICAgIHJldHVybiA0XG4gIH1cblxuICBuZXh0X3N0ZXAoaW5kZXg6IG51bWJlcik6IFNoYXBlW10ge1xuICAgIHN3aXRjaCAoaW5kZXgpIHtcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgcmV0dXJuIHRoaXMucXVhZHNlY3QoKVxuICAgICAgY2FzZSAxOlxuICAgICAgICByZXR1cm4gdGhpcy5iaXNlY3QoKVxuICAgICAgY2FzZSAyOlxuICAgICAgICB0aGlzLnJvdGF0ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5iaXNlY3QoKVxuICAgICAgY2FzZSAzOlxuICAgICAgICByZXR1cm4gW11cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignbmV4dF9zdGVwOiBpbmRleCBvdXQgb2YgcmFuZ2UnKVxuICAgIH1cbiAgfVxuXG59XG5cblxuYXN5bmMgZnVuY3Rpb24gbWFpbigpIHtcbiAgbGV0IHBpeGVsX3NpemUgPSBNYXRoLm1pbih3aW5kb3cuaW5uZXJIZWlnaHQsIHdpbmRvdy5pbm5lcldpZHRoKTtcbiAgY29uc29sZS5sb2coJ3BpeGVsIHNpemU6JywgcGl4ZWxfc2l6ZSk7XG5cbiAgLy8gdGhpcyBjb3VsZCBhbHNvIGJlIGEgZGlmZmVyZW50IHNoYXBlLi5cbiAgY29uc3QgcHQwID0gbmV3IFBvaW50KHt4OiAwLCB5OiBwaXhlbF9zaXplfSk7XG4gIGNvbnN0IHB0MSA9IG5ldyBQb2ludCh7eDogcGl4ZWxfc2l6ZSwgeTogcGl4ZWxfc2l6ZX0pO1xuICBjb25zdCBwdDIgPSBuZXcgUG9pbnQoe3g6IHBpeGVsX3NpemUsIHk6IDB9KTtcbiAgY29uc3QgcHQzID0gbmV3IFBvaW50KHt4OiAwLCB5OiAwfSk7XG4gIGNvbnN0IGZyYWN0YWxfc2VlZCA9IG5ldyBTcXVhcmUocHQwLCBwdDEsIHB0MiwgcHQzKTtcblxuICBjb25zdCB1cmxfcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcbiAgdmFyIG1heF9kZXB0aCA9IE51bWJlcih1cmxfcGFyYW1zLmdldCgnbWF4X2RlcHRoJykpO1xuICBpZiAoIW1heF9kZXB0aCkge1xuICAgIG1heF9kZXB0aCA9IDNcbiAgfVxuICB2YXIgc3Ryb2tlX3dpZHRoID0gTnVtYmVyKHVybF9wYXJhbXMuZ2V0KCdzdHJva2Vfd2lkdGgnKSk7XG4gIGlmICghc3Ryb2tlX3dpZHRoKSB7XG4gICAgc3Ryb2tlX3dpZHRoID0gM1xuICB9XG5cbiAgdmFyIG51bV9zaGFwZXMgPSBmcmFjdGFsX3NlZWQuZnJhY3RhbGl6ZShtYXhfZGVwdGgsIHBpeGVsX3NpemUsIHN0cm9rZV93aWR0aCk7XG4gIGNvbnNvbGUubG9nKCdudW1fc2hhcGVzJywgbnVtX3NoYXBlcyk7XG4gIHdoaWxlIChudW1fc2hhcGVzIDwgMikge1xuICAgIC8vIHJlbW92ZSBwcmV2aW91cyBTVkdcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGRvY3VtZW50LmJvZHkuY2hpbGRyZW5bMF0pO1xuXG4gICAgLy8gcmUtZ2VuZXJhdGVcbiAgICBudW1fc2hhcGVzID0gZnJhY3RhbF9zZWVkLmZyYWN0YWxpemUobWF4X2RlcHRoLCBwaXhlbF9zaXplLCBzdHJva2Vfd2lkdGgpO1xuICAgIGNvbnNvbGUubG9nKCdudW1fc2hhcGVzJywgbnVtX3NoYXBlcyk7XG4gIH1cblxufVxuXG4vLyBydW4gbWFpbiBvbiBsb2FkIChhZnRlciA8Ym9keT4gZXhpc3RzLi4pXG53aW5kb3cub25sb2FkID0gbWFpbjtcblxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBfX3dlYnBhY2tfbW9kdWxlc19fO1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gbm8gYmFzZVVSSVxuXG4vLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuLy8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4vLyBbcmVzb2x2ZSwgcmVqZWN0LCBQcm9taXNlXSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbnZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG5cdDE3OTogMFxufTtcblxuLy8gbm8gY2h1bmsgb24gZGVtYW5kIGxvYWRpbmdcblxuLy8gbm8gcHJlZmV0Y2hpbmdcblxuLy8gbm8gcHJlbG9hZGVkXG5cbi8vIG5vIEhNUlxuXG4vLyBubyBITVIgbWFuaWZlc3RcblxuX193ZWJwYWNrX3JlcXVpcmVfXy5PLmogPSAoY2h1bmtJZCkgPT4gKGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9PT0gMCk7XG5cbi8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xudmFyIHdlYnBhY2tKc29ucENhbGxiYWNrID0gKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uLCBkYXRhKSA9PiB7XG5cdHZhciBbY2h1bmtJZHMsIG1vcmVNb2R1bGVzLCBydW50aW1lXSA9IGRhdGE7XG5cdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuXHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcblx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMDtcblx0aWYoY2h1bmtJZHMuc29tZSgoaWQpID0+IChpbnN0YWxsZWRDaHVua3NbaWRdICE9PSAwKSkpIHtcblx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcblx0XHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG5cdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX18ubVttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKHJ1bnRpbWUpIHZhciByZXN1bHQgPSBydW50aW1lKF9fd2VicGFja19yZXF1aXJlX18pO1xuXHR9XG5cdGlmKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKSBwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbihkYXRhKTtcblx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcblx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkgJiYgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG5cdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0oKTtcblx0XHR9XG5cdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMDtcblx0fVxuXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5PKHJlc3VsdCk7XG59XG5cbnZhciBjaHVua0xvYWRpbmdHbG9iYWwgPSBzZWxmW1wid2VicGFja0NodW5rc3F1YXJlX2ZyYWN0YWxcIl0gPSBzZWxmW1wid2VicGFja0NodW5rc3F1YXJlX2ZyYWN0YWxcIl0gfHwgW107XG5jaHVua0xvYWRpbmdHbG9iYWwuZm9yRWFjaCh3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIDApKTtcbmNodW5rTG9hZGluZ0dsb2JhbC5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCBjaHVua0xvYWRpbmdHbG9iYWwucHVzaC5iaW5kKGNodW5rTG9hZGluZ0dsb2JhbCkpOyIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgZGVwZW5kcyBvbiBvdGhlciBsb2FkZWQgY2h1bmtzIGFuZCBleGVjdXRpb24gbmVlZCB0byBiZSBkZWxheWVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18uTyh1bmRlZmluZWQsIFs1MDBdLCAoKSA9PiAoX193ZWJwYWNrX3JlcXVpcmVfXyg0MTcpKSlcbl9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8oX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4iXSwibmFtZXMiOlsiZGVmZXJyZWQiLCJtaWRwb2ludCIsInhzIiwieXMiLCJ4IiwieSIsInJlbmRlcl9wb2ludGFycmF5IiwidGhpcyIsInJlbmRlciIsImZsYXRNYXAiLCJwdCIsImZyYWN0YWxpemUiLCJtYXhfZGVwdGgiLCJwaXhlbF9zaXplIiwic3Ryb2tlX3dpZHRoIiwiZHJhdyIsImFkZFRvIiwic2l6ZSIsInBvbHlsaW5lIiwiZmlsbCIsInN0cm9rZSIsImNvbG9yIiwid2lkdGgiLCJudW1fc3ViX3NoYXBlcyIsInVuZmluaXNoZWRfc2hhcGVzIiwicG9wIiwiY3VycmVudF9zaGFwZSIsImN1cnJlbnRfZGVwdGgiLCJuZXh0X3JhbmRvbV9udW0iLCJjcnlwdG8iLCJnZXRSYW5kb21WYWx1ZXMiLCJVaW50MzJBcnJheSIsIm1heCIsInN0ZXBfb3B0aW9ucyIsIm5leHRfc3RlcF9pbmRleCIsIk1hdGgiLCJmbG9vciIsInB1c2giLCJuZXh0X3N0ZXAiLCJtYXAiLCJsZW5ndGgiLCJwdDAiLCJwdDEiLCJwdDIiLCJyb3RhdGUiLCJwb2ludHMiLCJ0cmlzZWN0IiwicHQwMSIsInB0MTIiLCJwdDIwIiwiVHJpYW5nbGUiLCJ0X3NwbGl0IiwicHQyMDEiLCJRdWFkcmlsYXRlcmFsIiwiaW5kZXgiLCJFcnJvciIsIlNoYXBlIiwicHQzIiwicXVhZHNlY3QiLCJwdDIzIiwicHQzMCIsIlNxdWFyZSIsImJpc2VjdCIsIndpbmRvdyIsIm9ubG9hZCIsIm1pbiIsImlubmVySGVpZ2h0IiwiaW5uZXJXaWR0aCIsImNvbnNvbGUiLCJsb2ciLCJmcmFjdGFsX3NlZWQiLCJ1cmxfcGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwibG9jYXRpb24iLCJzZWFyY2giLCJOdW1iZXIiLCJnZXQiLCJudW1fc2hhcGVzIiwiZG9jdW1lbnQiLCJib2R5IiwicmVtb3ZlQ2hpbGQiLCJjaGlsZHJlbiIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwibSIsIk8iLCJyZXN1bHQiLCJjaHVua0lkcyIsImZuIiwicHJpb3JpdHkiLCJub3RGdWxmaWxsZWQiLCJJbmZpbml0eSIsImkiLCJmdWxmaWxsZWQiLCJqIiwiT2JqZWN0Iiwia2V5cyIsImV2ZXJ5Iiwia2V5Iiwic3BsaWNlIiwiciIsImQiLCJkZWZpbml0aW9uIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJpbnN0YWxsZWRDaHVua3MiLCJjaHVua0lkIiwid2VicGFja0pzb25wQ2FsbGJhY2siLCJwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiIsImRhdGEiLCJtb3JlTW9kdWxlcyIsInJ1bnRpbWUiLCJzb21lIiwiaWQiLCJjaHVua0xvYWRpbmdHbG9iYWwiLCJzZWxmIiwiZm9yRWFjaCIsImJpbmQiLCJfX3dlYnBhY2tfZXhwb3J0c19fIl0sInNvdXJjZVJvb3QiOiIifQ==